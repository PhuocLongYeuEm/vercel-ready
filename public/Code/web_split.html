<!DOCTYPE html>
<html lang="vi" class="light">
	<head>
		<meta charset="UTF-8" />
		<meta
			name="viewport"
			content="width=device-width, initial-scale=1.0, maximum-scale=1"
		/>
		<title>
			Lock Child Keeper - B·∫£o v·ªá an to√†n h·ªçc sinh - Ph√°t Hi·ªán H√†nh Vi Nguy Hi·ªÉm Tr√™n M·∫°ng
		</title>
		<meta
			name="description"
			content="H·ªá th·ªëng AI ph√°t hi·ªán s·ªõm c√°c h√†nh vi d·ª• d·ªó, b·∫Øt c√≥c, g·∫° g·∫´m nguy hi·ªÉm tr√™n m·∫°ng x√£ h·ªôi - B·∫£o v·ªá h·ªçc sinh THCS v·ªõi c√¥ng ngh·ªá ph√¢n t√≠ch ng√¥n ng·ªØ t·ª± nhi√™n"
		/>

		<!-- K·∫øt n·ªëi font -->
		<link
			rel="preconnect"
			href="https://fonts.googleapis.com"
		/>
		<link
			rel="preconnect"
			href="https://fonts.gstatic.com"
			crossorigin
		/>
		<link
			href="https://fonts.googleapis.com/css2?
        family=Architects+Daughter&
        family=DM+Sans:ital,opsz,wght@0,9..40,100..1000;1,9..40,100..1000&
        family=Fira+Code:wght@300..700&
        family=Geist+Mono:wght@100..900&
        family=Geist:wght@100..900&
        family=IBM+Plex+Mono:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700&
        family=IBM+Plex+Sans:ital,wght@0,100..700;1,100..700&
        family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&
        family=JetBrains+Mono:ital,wght@0,100..800;1,100..800&
        family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&
        family=Lora:ital,wght@0,400..700;1,400..700&
        family=Merriweather:ital,opsz,wght@0,18..144,300..900;1,18..144,300..900&
        family=Montserrat:ital,wght@0,100..900;1,100..900&
        family=Open+Sans:ital,wght@0,300..800;1,300..800&
        family=Outfit:wght@100..900&
        family=Oxanium:wght@200..800&
        family=Playfair+Display:ital,wght@0,400..900;1,400..900&
        family=Plus+Jakarta+Sans:ital,wght@0,200..800;1,200..800&
        family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;
          1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&
        family=Roboto+Mono:ital,wght@0,100..700;1,100..700&
        family=Roboto:ital,wght@0,100..900;1,100..900&
        family=Source+Code+Pro:ital,wght@0,200..900;1,200..900&
        family=Source+Serif+4:ital,opsz,wght@0,8..60,200..900;1,8..60,200..900&
        family=Space+Grotesk:wght@300..700&
        family=Space+Mono:ital,wght@0,400;0,700;1,400;1,700&
        display=swap"
			rel="stylesheet"
		/>
		
		<!-- Removed dev banner script for static serving to avoid MIME/type errors -->
		<!-- <script type="text/javascript" src="/@replit/vite-plugin-dev-banner/banner-script.js" id="replit-dev-banner"></script> -->

		<link rel="stylesheet" href="styles.css" />
	</head>
	<body style="padding-top: 0px">
		<div id="root">
			<div
				role="region"
				aria-label="Notifications (F8)"
				tabindex="-1"
				style="pointer-events: none"
			>
				<ol
					tabindex="-1"
					data-replit-metadata="client/src/components/ui/toaster.tsx:49:6"
					data-component-name="ToastViewport"
					class="fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]"
				></ol>
			</div>
			<div
				data-replit-metadata="client/src/pages/home.tsx:45:4"
				data-component-name="div"
				class="min-h-screen bg-background"
			>
				<nav
					data-replit-metadata="client/src/components/navigation.tsx:35:4"
					data-component-name="nav"
					class="fixed top-0 left-0 right-0 z-50 nav-hea border-b border-border"
				>
					<div
						data-replit-metadata="client/src/components/navigation.tsx:36:6"
						data-component-name="div"
						class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative"
					>
						<div
							data-replit-metadata="client/src/components/navigation.tsx:37:8"
							data-component-name="div"
							class="flex items-center h-16 justify-between"
						>
							<div>
								<img
									src="lolicon.png"
									class="w-16 h-16"
								></img
								><span
									data-replit-metadata="client/src/components/navigation.tsx:40:12"
									data-component-name="span"
									class="text-xl font-bold btn-outline"
									data-testid="text-logo"
									>Lock Child Keeper</span
								>
							</div>
							<div
								data-replit-metadata="client/src/components/navigation.tsx:45:10"
								data-component-name="div"
								class="hidden md:flex flex items-center gap-8"
							>
								<button id="homeBtn" class="text-foreground transition-colors btn-ol">Trang ch·ªß</button>
								<button id="protectBtn" class="text-foreground transition-colors btn-ol">Ph√≤ng Ng·ª´a</button>
								<button
									data-replit-metadata="client/src/components/navigation.tsx:60:12"
									data-component-name="button"
									class="text-foreground transition-colors btn-ol"
									data-testid="link-prevention"
								>
									Li√™n h·ªá
								</button>
								<button id="themeToggle" class="theme-toggle" title="Chuy·ªÉn ch·∫ø ƒë·ªô s√°ng/t·ªëi">üåô</button>
							</div>
						</div>
					</div>
				</nav>
				<main
					data-replit-metadata="client/src/pages/home.tsx:47:6"
					data-component-name="main"
					class="pt-16"
				>
					<section
						data-replit-metadata="client/src/components/hero.tsx:33:4"
						data-component-name="section"
						class="relative min-h-[80vh] flex items-center justify-center overflow-hidden"
					>
						<div
							data-replit-metadata="client/src/components/hero.tsx:35:6"
							data-component-name="div"
							class="absolute inset-0"
						></div>
						<div
							data-replit-metadata="client/src/components/hero.tsx:38:6"
							data-component-name="div"
							class="relative z-10 max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center py-20"
						>
							<div
								data-replit-metadata="client/src/components/hero.tsx:39:8"
								data-component-name="Badge"
								class="whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 hover-elevate border-transparent bg-secondary text-secondary-foreground mb-6"
								data-testid="badge-safety"
							>
								<svg
									xmlns="http://www.w3.org/2000/svg"
									width="24"
									height="24"
									viewBox="0 0 24 24"
									fill="none"
									stroke="currentColor"
									stroke-width="2"
									stroke-linecap="round"
									stroke-linejoin="round"
									class="lucide lucide-lock w-4 h-4 mr-2 inline"
									data-replit-metadata="client/src/components/hero.tsx:44:10"
									data-component-name="Lock"
								>
									<rect
										width="18"
										height="11"
										x="3"
										y="11"
										rx="2"
										ry="2"
									></rect>
									<path
										d="M7 11V7a5 5 0 0 1 10 0v4"
									></path></svg
								>An to√†n - Kh√¥ng l∆∞u d·ªØ li·ªáu
							</div>
							<h1
								data-replit-metadata="client/src/components/hero.tsx:48:8"
								data-component-name="h1"
								class="text-4xl md:text-5xl lg:text-6xl font-bold text-foreground mb-6"
								data-testid="text-hero-title"
							>
								B·∫£o V·ªá H·ªçc Sinh Tr∆∞·ªõc<br
									data-replit-metadata="client/src/components/hero.tsx:50:10"
									data-component-name="br"
								/><span
									data-replit-metadata="client/src/components/hero.tsx:51:10"
									data-component-name="span"
									class="text-primary"
									>H√†nh Vi Nguy Hi·ªÉm Tr√™n
									M·∫°ng</span
								>
							</h1>
							<p
								data-replit-metadata="client/src/components/hero.tsx:54:8"
								data-component-name="p"
								class="text-lg md:text-xl text-muted-foreground leading-relaxed mb-8 max-w-3xl mx-auto"
								data-testid="text-hero-description"
							>
								H·ªá th·ªëng AI ph√°t hi·ªán s·ªõm c√°c h√†nh
								vi d·ª• d·ªó, b·∫Øt c√≥c, ho·∫∑c g·∫° g·∫´m
								nguy hi·ªÉm tr√™n m·∫°ng x√£ h·ªôi. Ph√¢n
								t√≠ch tin nh·∫Øn t·ª± ƒë·ªông ƒë·ªÉ b·∫£o v·ªá
								h·ªçc sinh c·∫•p THCS.
							</p>
							<div
								data-replit-metadata="client/src/components/hero.tsx:59:8"
								data-component-name="div"
								class="flex flex-col sm:flex-row gap-4 justify-center items-center"
							>
								<button
									data-replit-metadata="client/src/components/hero.tsx:60:10"
									data-component-name="Button"
									class="inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 hover-elevate active-elevate-2 border [border-color:var(--button-outline)] shadow-xs active:shadow-none min-h-10 rounded-md px-8"
									data-testid="button-analyze-now"
								>
									<img
										src="https://icons.veryicon.com/png/o/business/erp-system-background-icon/analysis-10.png"
										class="w-5 h-5"
									></img
									>Ph√¢n T√≠ch Ngay</button>
								<button
									data-replit-metadata="client/src/components/hero.tsx:68:10"
									data-component-name="Button"
									class="inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 hover-elevate active-elevate-2 border [border-color:var(--button-outline)] shadow-xs active:shadow-none min-h-10 rounded-md px-8"
									data-testid="button-learn-more"
								>
									T√¨m Hi·ªÉu Th√™m
								</button>
							</div>
							<div
								data-replit-metadata="client/src/components/hero.tsx:79:8"
								data-component-name="div"
								class="mt-12 flex flex-wrap justify-center gap-8 text-sm text-muted-foreground"
							>
								<div
									data-replit-metadata="client/src/components/hero.tsx:80:10"
									data-component-name="div"
									class="flex items-center gap-2"
									data-testid="indicator-ai"
								>
									<div
										data-replit-metadata="client/src/components/hero.tsx:81:12"
										data-component-name="div"
										class="w-2 h-2 rounded-full bg-chart-3"
									></div>
									<span
										data-replit-metadata="client/src/components/hero.tsx:82:12"
										data-component-name="span"
										>Ph√¢n t√≠ch AI t·ª©c th√¨</span
									>
								</div>
								<div
									data-replit-metadata="client/src/components/hero.tsx:84:10"
									data-component-name="div"
									class="flex items-center gap-2"
									data-testid="indicator-privacy"
								>
									<div
										data-replit-metadata="client/src/components/hero.tsx:85:12"
										data-component-name="div"
										class="w-2 h-2 rounded-full bg-chart-3"
									></div>
									<span
										data-replit-metadata="client/src/components/hero.tsx:86:12"
										data-component-name="span"
										>B·∫£o m·∫≠t tuy·ªát ƒë·ªëi</span
									>
								</div>
								<div
									data-replit-metadata="client/src/components/hero.tsx:88:10"
									data-component-name="div"
									class="flex items-center gap-2"
									data-testid="indicator-free"
								>
									<div
										data-replit-metadata="client/src/components/hero.tsx:89:12"
										data-component-name="div"
										class="w-2 h-2 rounded-full bg-chart-3"
									></div>
									<span
										data-replit-metadata="client/src/components/hero.tsx:90:12"
										data-component-name="span"
										>Mi·ªÖn ph√≠ s·ª≠ d·ª•ng</span
									>
								</div>
							</div>
						</div>
					</section>
					<!-- üîπ Ph√¢n t√≠ch tin nh·∫Øn b·∫±ng AI OpenRouter (styled like main analysis card) -->
					<section
						id="ai-analyzer"
						class="py-16 md:py-20"
						>
						<div class="max-w-2xl mx-auto px-4 sm:px-6 lg:px-8">
							<div class="text-center mb-8">
								<h2 class="text-3xl md:text-4xl font-semibold text-foreground mb-4">
									Ph√¢n t√≠ch tin nh·∫Øn b·∫±ng AI
								</h2>
								<p class="text-muted-foreground leading-relaxed">
									Nh·∫≠p ƒëo·∫°n h·ªôi tho·∫°i ho·∫∑c t√¨nh hu·ªëng b·∫°n mu·ªën ph√¢n t√≠ch.<br>
									AI s·∫Ω nh·∫≠n di·ªán v√† gi·∫£i th√≠ch c√°c d·∫•u hi·ªáu r·ªßi ro trong tin nh·∫Øn.
								</p>
							</div>
							
							<div class="shadcn-card rounded-xl bg-card border-card-border text-card-foreground p-6 md:p-8 shadow-lg border-2">
								<div class="space-y-4">
									<div class="relative">
										<textarea
											id="userMessage"
											class="flex w-full rounded-md border border-input bg-background px-3 py-2 ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm min-h-[200px] resize-none text-base focus:border-primary transition-colors"
											placeholder="V√≠ d·ª•: Ch√†o em, anh th·∫•y em d·ªÖ th∆∞∆°ng qu√°, m√¨nh g·∫∑p nhau nh√©..."
										></textarea>
										<div class="absolute bottom-3 right-3 text-xs text-muted-foreground">
											0/5000
										</div>
									</div>
									<div class="flex items-center justify-between pt-2">
										<p class="text-sm text-muted-foreground">
											<span class="inline-block w-2 h-2 bg-chart-3 rounded-full mr-2"></span>
											D·ªØ li·ªáu kh√¥ng ƒë∆∞·ª£c l∆∞u tr·ªØ
										</p>
									</div>
									<section class="flex">
										<div class="flex items-center justify-between pt-2">
											<button
												id="analyzeBtn"
												class="inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover-elevate active-elevate-2 bg-primary text-primary-foreground border border-primary-border min-h-10 rounded-md px-8 transition-colors"
											>
												<img
													src="https://icons.veryicon.com/png/o/business/erp-system-background-icon/analysis-10.png"
													class="w-5 h-5"
												></img>
												Ph√¢n t√≠ch
											</button>
										</div>
										<div id="loading" style="display: none; margin-top: 10px; text-align: center;">
											<img src="1024.gif" alt="ƒêang ph√¢n t√≠ch..." width="100">
											<p>ƒêang ph√¢n t√≠ch...</p>
										</div>
									</section>
									<pre
										id="result"
										class="bg-white p-4 rounded-md border border-gray-200 text-muted-foreground"
										style="white-space: pre-wrap; margin-top: 8px;"
									></pre>
							</div>
							</div>
						</div>
					</section>

					<section
						data-replit-metadata="client/src/components/how-it-works.tsx:48:4"
						data-component-name="section"
						id="how-it-works"
						class="py-16 md:py-20 bg-muted/30"
					>
						<div
							data-replit-metadata="client/src/components/how-it-works.tsx:49:6"
							data-component-name="div"
							class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8"
						>
							<div
								data-replit-metadata="client/src/components/how-it-works.tsx:50:8"
								data-component-name="div"
								class="text-center mb-12"
							>
								<h2
									data-replit-metadata="client/src/components/how-it-works.tsx:51:10"
									data-component-name="h2"
									class="text-3xl md:text-4xl font-semibold text-foreground mb-4 flex items-center justify-center gap-3"
									data-testid="text-how-it-works-title"
								>
									<svg
										xmlns="http://www.w3.org/2000/svg"
										width="24"
										height="24"
										viewBox="0 0 24 24"
										fill="none"
										stroke="currentColor"
										stroke-width="2"
										stroke-linecap="round"
										stroke-linejoin="round"
										class="lucide lucide-brain w-8 h-8 text-accent"
										data-replit-metadata="client/src/components/how-it-works.tsx:52:12"
										data-component-name="Brain"
									>
										<path
											d="M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z"
										></path>
										<path
											d="M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z"
										></path>
										<path
											d="M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4"
										></path>
										<path
											d="M17.599 6.5a3 3 0 0 0 .399-1.375"
										></path>
										<path
											d="M6.003 5.125A3 3 0 0 0 6.401 6.5"
										></path>
										<path
											d="M3.477 10.896a4 4 0 0 1 .585-.396"
										></path>
										<path
											d="M19.938 10.5a4 4 0 0 1 .585.396"
										></path>
										<path
											d="M6 18a4 4 0 0 1-1.967-.516"
										></path>
										<path
											d="M19.967 17.484A4 4 0 0 1 18 18"
										></path></svg
									>C√°ch Ho·∫°t ƒê·ªông
								</h2>
								<p
									data-replit-metadata="client/src/components/how-it-works.tsx:55:10"
									data-component-name="p"
									class="text-muted-foreground leading-relaxed max-w-3xl mx-auto"
									data-testid="text-how-it-works-description"
								>
									H·ªá th·ªëng s·ª≠ d·ª•ng tr√≠ tu·ªá nh√¢n
									t·∫°o ti√™n ti·∫øn ƒë·ªÉ ph√¢n t√≠ch ng√¥n
									ng·ªØ v√† ph√°t hi·ªán c√°c h√†nh vi d·ª•
									d·ªó, b·∫Øt c√≥c, g·∫° g·∫´m tr√™n m·∫°ng x√£
									h·ªôi.
								</p>
							</div>
							<div
								data-replit-metadata="client/src/components/how-it-works.tsx:61:8"
								data-component-name="div"
								class="grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-8"
							>
								<div
									data-replit-metadata="client/src/components/how-it-works.tsx:65:14"
									data-component-name="Card"
									class="shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm p-6 md:p-8 hover-elevate transition-all duration-300"
									data-testid="step-card-0"
								>
									<div
										data-replit-metadata="client/src/components/how-it-works.tsx:70:16"
										data-component-name="div"
										class="flex flex-col items-start gap-4"
									>
										<div
											data-replit-metadata="client/src/components/how-it-works.tsx:71:18"
											data-component-name="div"
											class="w-16 h-16 rounded-xl bg-primary/10 flex items-center justify-center"
										>
											<svg
												xmlns="http://www.w3.org/2000/svg"
												width="24"
												height="24"
												viewBox="0 0 24 24"
												fill="none"
												stroke="currentColor"
												stroke-width="2"
												stroke-linecap="round"
												stroke-linejoin="round"
												class="lucide lucide-message-square w-8 h-8 text-primary"
												data-replit-metadata="client/src/components/how-it-works.tsx:72:20"
												data-component-name="Icon"
												data-testid="step-icon-0"
											>
												<path
													d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"
												></path>
											</svg>
										</div>
										<div
											data-replit-metadata="client/src/components/how-it-works.tsx:74:18"
											data-component-name="div"
										>
											<h3
												data-replit-metadata="client/src/components/how-it-works.tsx:75:20"
												data-component-name="h3"
												class="text-xl font-semibold text-foreground mb-2"
												data-testid="step-title-0"
											>
												1. Nh·∫≠p Tin Nh·∫Øn
											</h3>
											<p
												data-replit-metadata="client/src/components/how-it-works.tsx:78:20"
												data-component-name="p"
												class="text-muted-foreground leading-relaxed"
												data-testid="step-description-0"
											>
												B·∫°n cung c·∫•p ƒëo·∫°n h·ªôi
												tho·∫°i ho·∫∑c tin nh·∫Øn c·∫ßn
												ph√¢n t√≠ch v√†o h·ªá th·ªëng.
											</p>
										</div>
									</div>
								</div>
								<div
									data-replit-metadata="client/src/components/how-it-works.tsx:65:14"
									data-component-name="Card"
									class="shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm p-6 md:p-8 hover-elevate transition-all duration-300"
									data-testid="step-card-1"
								>
									<div
										data-replit-metadata="client/src/components/how-it-works.tsx:70:16"
										data-component-name="div"
										class="flex flex-col items-start gap-4"
									>
										<div
											data-replit-metadata="client/src/components/how-it-works.tsx:71:18"
											data-component-name="div"
											class="w-16 h-16 rounded-xl bg-primary/10 flex items-center justify-center"
										>
											<svg
												xmlns="http://www.w3.org/2000/svg"
												width="24"
												height="24"
												viewBox="0 0 24 24"
												fill="none"
												stroke="currentColor"
												stroke-width="2"
												stroke-linecap="round"
												stroke-linejoin="round"
												class="lucide lucide-brain w-8 h-8 text-primary"
												data-replit-metadata="client/src/components/how-it-works.tsx:72:20"
												data-component-name="Icon"
												data-testid="step-icon-1"
											>
												<path
													d="M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z"
												></path>
												<path
													d="M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z"
												></path>
												<path
													d="M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4"
												></path>
												<path
													d="M17.599 6.5a3 3 0 0 0 .399-1.375"
												></path>
												<path
													d="M6.003 5.125A3 3 0 0 0 6.401 6.5"
												></path>
												<path
													d="M3.477 10.896a4 4 0 0 1 .585-.396"
												></path>
												<path
													d="M19.938 10.5a4 4 0 0 1 .585.396"
												></path>
												<path
													d="M6 18a4 4 0 0 1-1.967-.516"
												></path>
												<path
													d="M19.967 17.484A4 4 0 0 1 18 18"
												></path>
											</svg>
										</div>
										<div
											data-replit-metadata="client/src/components/how-it-works.tsx:74:18"
											data-component-name="div"
										>
											<h3
												data-replit-metadata="client/src/components/how-it-works.tsx:75:20"
												data-component-name="h3"
												class="text-xl font-semibold text-foreground mb-2"
												data-testid="step-title-1"
											>
												2. AI Ph√¢n T√≠ch
											</h3>
											<p
												data-replit-metadata="client/src/components/how-it-works.tsx:78:20"
												data-component-name="p"
												class="text-muted-foreground leading-relaxed"
												data-testid="step-description-1"
											>
												M√¥ h√¨nh GPT-5 x·ª≠ l√Ω ng√¥n
												ng·ªØ t·ª± nhi√™n, ph√°t hi·ªán
												c√°c m·∫´u h√†nh vi nguy hi·ªÉm.
											</p>
										</div>
									</div>
								</div>
								<div
									data-replit-metadata="client/src/components/how-it-works.tsx:65:14"
									data-component-name="Card"
									class="shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm p-6 md:p-8 hover-elevate transition-all duration-300"
									data-testid="step-card-2"
								>
									<div
										data-replit-metadata="client/src/components/how-it-works.tsx:70:16"
										data-component-name="div"
										class="flex flex-col items-start gap-4"
									>
										<div
											data-replit-metadata="client/src/components/how-it-works.tsx:71:18"
											data-component-name="div"
											class="w-16 h-16 rounded-xl bg-primary/10 flex items-center justify-center"
										>
											<svg
												xmlns="http://www.w3.org/2000/svg"
												width="24"
												height="24"
												viewBox="0 0 24 24"
												fill="none"
												stroke="currentColor"
												stroke-width="2"
												stroke-linecap="round"
												stroke-linejoin="round"
												class="lucide lucide-circle-alert w-8 h-8 text-primary"
												data-replit-metadata="client/src/components/how-it-works.tsx:72:20"
												data-component-name="Icon"
												data-testid="step-icon-2"
											>
												<circle
													cx="12"
													cy="12"
													r="10"
												></circle>
												<line
													x1="12"
													x2="12"
													y1="8"
													y2="12"
												></line>
												<line
													x1="12"
													x2="12.01"
													y1="16"
													y2="16"
												></line>
											</svg>
										</div>
										<div
											data-replit-metadata="client/src/components/how-it-works.tsx:74:18"
											data-component-name="div"
										>
											<h3
												data-replit-metadata="client/src/components/how-it-works.tsx:75:20"
												data-component-name="h3"
												class="text-xl font-semibold text-foreground mb-2"
												data-testid="step-title-2"
											>
												3. Nh·∫≠n Di·ªán T√≠n Hi·ªáu
											</h3>
											<p
												data-replit-metadata="client/src/components/how-it-works.tsx:78:20"
												data-component-name="p"
												class="text-muted-foreground leading-relaxed"
												data-testid="step-description-2"
											>
												H·ªá th·ªëng x√°c ƒë·ªãnh c√°c d·∫•u
												hi·ªáu nh∆∞: g·ª£i √Ω gi·ªØ b√≠
												m·∫≠t, h·ª©a t·∫∑ng qu√†, r·ªß g·∫∑p
												ri√™ng.
											</p>
										</div>
									</div>
								</div>
								<div
									data-replit-metadata="client/src/components/how-it-works.tsx:65:14"
									data-component-name="Card"
									class="shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm p-6 md:p-8 hover-elevate transition-all duration-300"
									data-testid="step-card-3"
								>
									<div
										data-replit-metadata="client/src/components/how-it-works.tsx:70:16"
										data-component-name="div"
										class="flex flex-col items-start gap-4"
									>
										<div
											data-replit-metadata="client/src/components/how-it-works.tsx:71:18"
											data-component-name="div"
											class="w-16 h-16 rounded-xl bg-primary/10 flex items-center justify-center"
										>
											<svg
												xmlns="http://www.w3.org/2000/svg"
												width="24"
												height="24"
												viewBox="0 0 24 24"
												fill="none"
												stroke="currentColor"
												stroke-width="2"
												stroke-linecap="round"
												stroke-linejoin="round"
												class="lucide lucide-shield w-8 h-8 text-primary"
												data-replit-metadata="client/src/components/how-it-works.tsx:72:20"
												data-component-name="Icon"
												data-testid="step-icon-3"
											>
												<path
													d="M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z"
												></path>
											</svg>
										</div>
										<div
											data-replit-metadata="client/src/components/how-it-works.tsx:74:18"
											data-component-name="div"
										>
											<h3
												data-replit-metadata="client/src/components/how-it-works.tsx:75:20"
												data-component-name="h3"
												class="text-xl font-semibold text-foreground mb-2"
												data-testid="step-title-3"
											>
												4. C·∫£nh B√°o &amp; Khuy·∫øn
												Ngh·ªã
											</h3>
											<p
												data-replit-metadata="client/src/components/how-it-works.tsx:78:20"
												data-component-name="p"
												class="text-muted-foreground leading-relaxed"
												data-testid="step-description-3"
											>
												Hi·ªÉn th·ªã m·ª©c ƒë·ªô r·ªßi ro
												(Cao/Trung b√¨nh/An to√†n)
												v√† ƒë∆∞a ra l·ªùi khuy√™n c·ª•
												th·ªÉ.
											</p>
										</div>
									</div>
								</div>
							</div>
						</div>
					</section>
					<section
						data-replit-metadata="client/src/components/prevention-solutions.tsx:52:4"
						data-component-name="section"
						id="prevention"
						class="py-16 md:py-20"
					>
						<div
							data-replit-metadata="client/src/components/prevention-solutions.tsx:53:6"
							data-component-name="div"
							class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8"
						>
							<div
								data-replit-metadata="client/src/components/prevention-solutions.tsx:54:8"
								data-component-name="div"
								class="text-center mb-12"
							>
								<h2
									data-replit-metadata="client/src/components/prevention-solutions.tsx:55:10"
									data-component-name="h2"
									class="text-3xl md:text-4xl font-semibold text-foreground mb-4 flex items-center justify-center gap-3"
									data-testid="text-prevention-title"
								>
									<svg
										xmlns="http://www.w3.org/2000/svg"
										width="24"
										height="24"
										viewBox="0 0 24 24"
										fill="none"
										stroke="currentColor"
										stroke-width="2"
										stroke-linecap="round"
										stroke-linejoin="round"
										class="lucide lucide-shield w-8 h-8 text-primary"
										data-replit-metadata="client/src/components/prevention-solutions.tsx:56:12"
										data-component-name="Shield"
									>
										<path
											d="M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z"
										></path></svg
									>Gi·∫£i Ph√°p Ph√≤ng Ng·ª´a
								</h2>
								<p
									data-replit-metadata="client/src/components/prevention-solutions.tsx:59:10"
									data-component-name="p"
									class="text-muted-foreground leading-relaxed max-w-3xl mx-auto"
									data-testid="text-prevention-description"
								>
									C√°c bi·ªán ph√°p to√†n di·ªán gi√∫p h·ªçc
									sinh, ph·ª• huynh v√† gi√°o vi√™n b·∫£o
									v·ªá tr·∫ª em kh·ªèi nguy c∆° tr√™n m·∫°ng
									x√£ h·ªôi.
								</p>
							</div>
							<div
								data-replit-metadata="client/src/components/prevention-solutions.tsx:65:8"
								data-component-name="div"
								class="grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-8"
							>
								<div
									data-replit-metadata="client/src/components/prevention-solutions.tsx:69:14"
									data-component-name="Card"
									class="shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm p-6 md:p-8 hover-elevate transition-all duration-300"
									data-testid="solution-card-0"
								>
									<div
										data-replit-metadata="client/src/components/prevention-solutions.tsx:74:16"
										data-component-name="div"
										class="flex flex-col items-start gap-4"
									>
										<div
											data-replit-metadata="client/src/components/prevention-solutions.tsx:75:18"
											data-component-name="div"
											class="w-16 h-16 rounded-xl bg-primary/10 flex items-center justify-center overflow-hidden"
										>
											<img
												src="warning.png"
												class="w-14 h-15"
											></img>
										</div>
										<div
											data-replit-metadata="client/src/components/prevention-solutions.tsx:78:18"
											data-component-name="div"
										>
											<h3
												data-replit-metadata="client/src/components/prevention-solutions.tsx:79:20"
												data-component-name="h3"
												class="text-xl font-semibold text-foreground mb-2"
												data-testid="solution-title-0"
											>
												Ki·ªÉm ch·ª©ng th√¥ng tin
											</h3>
											<p
												data-replit-metadata="client/src/components/prevention-solutions.tsx:82:20"
												data-component-name="p"
												class="text-muted-foreground leading-relaxed"
												data-testid="solution-description-0"
											>
												Khi c√≥ ng∆∞·ªùi l·∫° gi·∫£ danh ‚Äúng∆∞·ªùi th√¢n g·∫∑p n·∫°n‚Äù, h√£y b√¨nh tƒ©nh g·ªçi tr·ª±c ti·∫øp cho ng∆∞·ªùi ƒë√≥ ho·∫∑c li√™n h·ªá v·ªõi ng∆∞·ªùi th√¢n kh√°c ƒë·ªÉ x√°c nh·∫≠n. Ki·ªÉm tra th√¥ng tin t·∫°i ngu·ªìn ch√≠nh th·ªëng nh∆∞ tr∆∞·ªùng h·ªçc, c∆° quan ho·∫∑c t·ªï ch·ª©c.
											</p>
										</div>
									</div>
								</div>
								<div
									data-replit-metadata="client/src/components/prevention-solutions.tsx:69:14"
									data-component-name="Card"
									class="shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm p-6 md:p-8 hover-elevate transition-all duration-300"
									data-testid="solution-card-1"
								>
									<div
										data-replit-metadata="client/src/components/prevention-solutions.tsx:74:16"
										data-component-name="div"
										class="flex flex-col items-start gap-4"
									>
										<div
											data-replit-metadata="client/src/components/prevention-solutions.tsx:75:18"
											data-component-name="div"
											class="w-16 h-16 rounded-xl bg-primary/10 flex items-center justify-center"
										>
											<img
												src="scrrt.png"
												class="lucide lucide-lock w-16 h-16 text-chart-2"
											></img>
										</div>
										<div
											data-replit-metadata="client/src/components/prevention-solutions.tsx:78:18"
											data-component-name="div"
										>
											<h3
												data-replit-metadata="client/src/components/prevention-solutions.tsx:79:20"
												data-component-name="h3"
												class="text-xl font-semibold text-foreground mb-2"
												data-testid="solution-title-1"
											>
												B·∫£o M·∫≠t T√†i Kho·∫£n
											</h3>
											<p
												data-replit-metadata="client/src/components/prevention-solutions.tsx:82:20"
												data-component-name="p"
												class="text-muted-foreground leading-relaxed"
												data-testid="solution-description-1"
											>
												Ch·ªß ƒë·ªông ph·∫£n ·ª©ng: s·ª≠ d·ª•ng t√≠nh nƒÉng b√°o c√°o ho·∫∑c ch·∫∑n t√†i kho·∫£n l·ª´a ƒë·∫£o tr√™n m·∫°ng x√£ h·ªôi. N·∫øu g·∫∑p t·ªëng ti·ªÅn hay ƒëe d·ªça, b√°o ngay cho c∆° quan ch·ª©c nƒÉng ƒë·ªÉ ƒë∆∞·ª£c h·ªó tr·ª£.
											</p>
										</div>
									</div>
								</div>
								<div
									data-replit-metadata="client/src/components/prevention-solutions.tsx:69:14"
									data-component-name="Card"
									class="shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm p-6 md:p-8 hover-elevate transition-all duration-300"
									data-testid="solution-card-2"
								>
									<div
										data-replit-metadata="client/src/components/prevention-solutions.tsx:74:16"
										data-component-name="div"
										class="flex flex-col items-start gap-4"
									>
										<div
											data-replit-metadata="client/src/components/prevention-solutions.tsx:75:18"
											data-component-name="div"
											class="w-16 h-16 rounded-xl bg-primary/10 flex items-center justify-center"
										>
											<img
												src="Speakup.png"
												class="w-16 h-16"
											></img>
										</div>
										<div
											data-replit-metadata="client/src/components/prevention-solutions.tsx:78:18"
											data-component-name="div"
										>
											<h3
												data-replit-metadata="client/src/components/prevention-solutions.tsx:79:20"
												data-component-name="h3"
												class="text-xl font-semibold text-foreground mb-2"
												data-testid="solution-title-2"
											>
												B√°o C√°o H√†nh Vi
											</h3>
											<p
												data-replit-metadata="client/src/components/prevention-solutions.tsx:82:20"
												data-component-name="p"
												class="text-muted-foreground leading-relaxed"
												data-testid="solution-description-2"
											>
												H·ªçc sinh: Khi g·∫∑p t√¨nh hu·ªëng b·∫•t th∆∞·ªùng, h√£y l·∫≠p t·ª©c k·ªÉ cho cha m·∫π ho·∫∑c th·∫ßy c√¥ bi·∫øt ƒë·ªÉ ƒë∆∞·ª£c gi√∫p ƒë·ª° k·ªãp th·ªùi.
												Ph·ª• huynh/ng∆∞·ªùi l·ªõn: B√°o ngay cho c∆° quan ch·ª©c nƒÉng, c√¥ng an ƒë·ªãa ph∆∞∆°ng ho·∫∑c T·ªïng ƒë√†i 111 ‚Äì ƒë∆∞·ªùng d√¢y n√≥ng b·∫£o v·ªá tr·∫ª em.
											</p>
										</div>
									</div>
								</div>
								<div
									data-replit-metadata="client/src/components/prevention-solutions.tsx:69:14"
									data-component-name="Card"
									class="shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm p-6 md:p-8 hover-elevate transition-all duration-300"
									data-testid="solution-card-3"
								>
									<div
										data-replit-metadata="client/src/components/prevention-solutions.tsx:74:16"
										data-component-name="div"
										class="flex flex-col items-start gap-4"
									>
										<div
											data-replit-metadata="client/src/components/prevention-solutions.tsx:75:18"
											data-component-name="div"
											class="w-16 h-16 rounded-xl bg-primary/10 flex items-center justify-center"
										>
											<img
												src="clam.png"
												class="w-16 h-16"
											>
											</img>
										</div>
										<div
											data-replit-metadata="client/src/components/prevention-solutions.tsx:78:18"
											data-component-name="div"
										>
											<h3
												data-replit-metadata="client/src/components/prevention-solutions.tsx:79:20"
												data-component-name="h3"
												class="text-xl font-semibold text-foreground mb-2"
												data-testid="solution-title-3"
											>
												Gi·ªØ V·ªØng T√¢m L√Ω
											</h3>
											<p
												data-replit-metadata="client/src/components/prevention-solutions.tsx:82:20"
												data-component-name="p"
												class="text-muted-foreground leading-relaxed"
												data-testid="solution-description-3"
											>
												ƒê·ªçc kƒ© tin nh·∫Øn (t√¨nh hu·ªëng), kh√¥ng ph·∫£n ·ª©ng v·ªôi v√†ng
												ƒê·ª´ng v·ªôi chuy·ªÉn ti·ªÅn, g·ª≠i th√¥ng tin c√° nh√¢n, hay l√†m theo y√™u c·∫ßu.
												N·∫øu nghi ng·ªù, d·ª´ng l·∫°i v√† c√¢n nh·∫Øc tr∆∞·ªõc m·ªçi b∆∞·ªõc ƒëi.
											</p>
										</div>
									</div>
								</div>
							</div>
							<div
								data-replit-metadata="client/src/components/prevention-solutions.tsx:93:8"
								data-component-name="Card"
								class="shadcn-card rounded-xl border text-card-foreground shadow-sm mt-8 p-6 md:p-8 bg-destructive/5 border-destructive/20"
							>
								<div
									data-replit-metadata="client/src/components/prevention-solutions.tsx:94:10"
									data-component-name="div"
									class="text-center"
								>
									<h4
										data-replit-metadata="client/src/components/prevention-solutions.tsx:95:12"
										data-component-name="h4"
										class="text-lg font-semibold text-primary mb-2 flex items-center justify-center gap-2"
										data-testid="text-emergency-title"
									>
										<svg
											xmlns="http://www.w3.org/2000/svg"
											width="24"
											height="24"
											viewBox="0 0 24 24"
											fill="none"
											stroke="currentColor"
											stroke-width="2"
											stroke-linecap="round"
											stroke-linejoin="round"
											class="lucide lucide-triangle-alert w-5 h-5 text-destructive"
											data-replit-metadata="client/src/components/prevention-solutions.tsx:96:14"
											data-component-name="AlertTriangle"
										>
											<path
												d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"
											></path>
											<path d="M12 9v4"></path>
											<path
												d="M12 17h.01"
											></path></svg
										>Li√™n H·ªá Kh·∫©n C·∫•p
									</h4>
									<p
										data-replit-metadata="client/src/components/prevention-solutions.tsx:99:12"
										data-component-name="p"
										class="text-muted-foreground leading-relaxed mb-4"
										data-testid="text-emergency-description"
									>
										N·∫øu ph√°t hi·ªán tr∆∞·ªùng h·ª£p nguy
										hi·ªÉm, vui l√≤ng li√™n h·ªá ngay:
									</p>
									<div
										data-replit-metadata="client/src/components/prevention-solutions.tsx:102:12"
										data-component-name="div"
										class="flex flex-wrap justify-center gap-4 text-sm text-primary"
									>
										<span
											data-replit-metadata="client/src/components/prevention-solutions.tsx:103:14"
											data-component-name="span"
											class="font-semibold"
											data-testid="text-hotline-police"
											>C√¥ng an: 113</span
										><span
											data-replit-metadata="client/src/components/prevention-solutions.tsx:106:14"
											data-component-name="span"
											class="text-muted-foreground"
											>|</span
										><span
											data-replit-metadata="client/src/components/prevention-solutions.tsx:107:14"
											data-component-name="span"
											class="font-semibold"
											data-testid="text-hotline-child"
											>T·ªïng ƒë√†i tr·∫ª em: 111</span
										><span
											data-replit-metadata="client/src/components/prevention-solutions.tsx:110:14"
											data-component-name="span"
											class="text-muted-foreground"
											>|</span
										><span
											data-replit-metadata="client/src/components/prevention-solutions.tsx:111:14"
											data-component-name="span"
											class="font-semibold"
											data-testid="text-hotline-school"
											>Nh√† tr∆∞·ªùng: 0274.374.8900</span
										>
									</div>
								</div>
							</div>
						</div>
					</section>
				</main>
				<footer
					data-replit-metadata="client/src/components/footer.tsx:24:4"
					data-component-name="footer"
					class="bg-card border-t border-border py-12"
				>
					<div
						data-replit-metadata="client/src/components/footer.tsx:25:6"
						data-component-name="div"
						class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8"
					>
						<div
							data-replit-metadata="client/src/components/footer.tsx:26:8"
							data-component-name="div"
							class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-8"
						>
							<div
								data-replit-metadata="client/src/components/footer.tsx:28:10"
								data-component-name="div"
							>
								<div
									data-replit-metadata="client/src/components/footer.tsx:29:12"
									data-component-name="div"
									class="flex items-center gap-2 mb-4"
								>
									<svg
										xmlns="http://www.w3.org/2000/svg"
										width="24"
										height="24"
										viewBox="0 0 24 24"
										fill="none"
										stroke="currentColor"
										stroke-width="2"
										stroke-linecap="round"
										stroke-linejoin="round"
										class="lucide lucide-shield w-6 h-6 text-primary"
										data-replit-metadata="client/src/components/footer.tsx:30:14"
										data-component-name="Shield"
									>
										<path
											d="M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z"
										></path></svg
									><span
										data-replit-metadata="client/src/components/footer.tsx:31:14"
										data-component-name="span"
										class="text-lg font-bold text-foreground"
										>B·∫£o V·ªá H·ªçc Sinh</span
									>
								</div>
								<p
									data-replit-metadata="client/src/components/footer.tsx:33:12"
									data-component-name="p"
									class="text-sm text-muted-foreground leading-relaxed"
									data-testid="text-footer-about"
								>
									H·ªá th·ªëng AI ph√°t hi·ªán h√†nh vi
									nguy hi·ªÉm tr√™n m·∫°ng x√£ h·ªôi, b·∫£o
									v·ªá h·ªçc sinh THCS kh·ªèi c√°c nguy
									c∆° d·ª• d·ªó, b·∫Øt c√≥c.
								</p>
							</div>
							<div
								data-replit-metadata="client/src/components/footer.tsx:40:10"
								data-component-name="div"
							>
								<h3
									data-replit-metadata="client/src/components/footer.tsx:41:12"
									data-component-name="h3"
									class="text-lg font-semibold text-foreground mb-4"
								>
									T√†i Nguy√™n
								</h3>
								<ul
									data-replit-metadata="client/src/components/footer.tsx:42:12"
									data-component-name="ul"
									class="space-y-2"
								>
									<li
										data-replit-metadata="client/src/components/footer.tsx:43:14"
										data-component-name="li"
									>
										<a
											data-replit-metadata="client/src/components/footer.tsx:44:16"
											data-component-name="a"
											href="#analyze"
											class="text-sm text-muted-foreground hover:text-primary transition-colors"
											data-testid="link-footer-analyze"
											>Ph√¢n T√≠ch Tin Nh·∫Øn</a
										>
									</li>
									<li
										data-replit-metadata="client/src/components/footer.tsx:48:14"
										data-component-name="li"
									>
										<a
											data-replit-metadata="client/src/components/footer.tsx:49:16"
											data-component-name="a"
											href="#how-it-works"
											class="text-sm text-muted-foreground hover:text-primary transition-colors"
											data-testid="link-footer-how-it-works"
											>C√°ch Ho·∫°t ƒê·ªông</a
										>
									</li>
									<li
										data-replit-metadata="client/src/components/footer.tsx:53:14"
										data-component-name="li"
									>
										<a
											data-replit-metadata="client/src/components/footer.tsx:54:16"
											data-component-name="a"
											href="#prevention"
											class="text-sm text-muted-foreground hover:text-primary transition-colors"
											data-testid="link-footer-prevention"
											>Gi·∫£i Ph√°p Ph√≤ng Ng·ª´a</a
										>
									</li>
								</ul>
							</div>
							<div
								data-replit-metadata="client/src/components/footer.tsx:62:10"
								data-component-name="div"
							>
								<h3
									data-replit-metadata="client/src/components/footer.tsx:63:12"
									data-component-name="h3"
									class="text-lg font-semibold text-foreground mb-4"
								>
									Li√™n H·ªá
								</h3>
								<div
									data-replit-metadata="client/src/components/footer.tsx:64:12"
									data-component-name="div"
									class="space-y-3"
								>
									<div
										data-replit-metadata="client/src/components/footer.tsx:65:14"
										data-component-name="div"
										class="flex items-center gap-2"
									>
										<svg
											xmlns="http://www.w3.org/2000/svg"
											width="24"
											height="24"
											viewBox="0 0 24 24"
											fill="none"
											stroke="currentColor"
											stroke-width="2"
											stroke-linecap="round"
											stroke-linejoin="round"
											class="lucide lucide-mail w-4 h-4 text-muted-foreground"
											data-replit-metadata="client/src/components/footer.tsx:66:16"
											data-component-name="Mail"
										>
											<rect
												width="20"
												height="16"
												x="2"
												y="4"
												rx="2"
											></rect>
											<path
												d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"
											></path></svg
										><span
											data-replit-metadata="client/src/components/footer.tsx:67:16"
											data-component-name="span"
											class="text-sm text-muted-foreground"
											data-testid="text-footer-email"
											>ngocntt.tdn@ta.sgdbinhduong.edu.vn</span
										>
									</div>
									<div
										data-replit-metadata="client/src/components/footer.tsx:71:14"
										data-component-name="div"
										class="flex items-center gap-2"
									>
										<svg
											xmlns="http://www.w3.org/2000/svg"
											width="24"
											height="24"
											viewBox="0 0 24 24"
											fill="none"
											stroke="currentColor"
											stroke-width="2"
											stroke-linecap="round"
											stroke-linejoin="round"
											class="lucide lucide-github w-4 h-4 text-muted-foreground"
											data-replit-metadata="client/src/components/footer.tsx:72:16"
											data-component-name="Github"
										>
											<path
												d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"
											></path>
											<path
												d="M9 18c-4.51 2-5-2-7-2"
											></path></svg
										><a
											data-replit-metadata="client/src/components/footer.tsx:73:16"
											data-component-name="a"
											href="https://github.com"
											target="_blank"
											rel="noopener noreferrer"
											class="text-sm text-muted-foreground hover:text-primary transition-colors"
											data-testid="link-footer-github"
											>GitHub</a
										>
									</div>
								</div>
							</div>
						</div>
						<div
							data-replit-metadata="client/src/components/footer.tsx:88:8"
							data-component-name="div"
							class="pt-8 border-t border-border flex flex-col md:flex-row justify-between items-center gap-4"
						>
							<p
								data-replit-metadata="client/src/components/footer.tsx:89:10"
								data-component-name="p"
								class="text-sm text-muted-foreground"
								data-testid="text-footer-copyright"
							>
								¬© 2025 B·∫£o V·ªá H·ªçc Sinh. D·ª± √°n
								demo - Kh√¥ng thu th·∫≠p d·ªØ li·ªáu.
							</p>
							<div
								data-replit-metadata="client/src/components/footer.tsx:92:10"
								data-component-name="div"
								class="flex items-center gap-2 text-sm text-muted-foreground"
							>
								<span
									data-replit-metadata="client/src/components/footer.tsx:93:12"
									data-component-name="span"
									>Powered by</span
								><span
									data-replit-metadata="client/src/components/footer.tsx:94:12"
									data-component-name="span"
									class="font-semibold text-primary"
									data-testid="text-footer-tech"
									>Gemini-Flash-2.5</span
								>
							</div>
						</div>
					</div>
				</footer>
			</div>
		</div>
		<!-- Removed dev-built module import for static serving: /src/main.tsx -->
		<!-- <script type="module" src="/src/main.tsx?v=DZe92KYbIuRzzWYjRtZhu"></script> -->

		<script>
			(function () {
				// Update character counter for analysis textarea and enable/disable analyze button
				const MAX = 5000;
				function qs(sel) {
					return document.querySelector(sel);
				}

				function renderOutput(result) {
					let output = qs(
						'[data-testid="output-analysis"]',
					);
					if (!output) {
						// T·∫°o v√πng hi·ªÉn th·ªã n·∫øu ch∆∞a c√≥
						const analyzeBtn = document.getElementById("analyzeBtn");
						const card = analyzeBtn ? analyzeBtn.closest(".shadcn-card") : null;
						if (!card) return console.warn("Card container not found");

						output =
							document.createElement("div");
						output.setAttribute(
							"data-testid",
							"output-analysis",
						);
						card.appendChild(output);
					}
					if (!result) {
						output.innerHTML = "";
						return;
					}
					// Hi·ªÉn th·ªã k·∫øt qu·∫£ theo m·∫´u
					let score =
						typeof result.score === "number"
							? result.score
							: "";
					let label = result.label || "";
					let analysis = result.analysis || "";
					let color = label
						.toLowerCase()
						.includes("nguy")
						? "#e53e3e"
						: label
									.toLowerCase()
									.includes("an to√†n")
							? "#38a169"
							: "#f6ad55";
					output.innerHTML = `
        `;
				}

				function init() {
					const textarea = document.getElementById("userMessage");
					const counter = textarea?.parentElement.querySelector("div.text-xs");
					const analyzeBtn = document.getElementById("analyzeBtn");

					if (!textarea || !counter)
						return console.warn("Char counter init: elements missing");


					function update() {
						let v = textarea.value || "";
						if (v.length > MAX)
							textarea.value = v = v.slice(
								0,
								MAX,
							);
						counter.textContent = `${v.length}/${MAX}`;
						if (analyzeBtn)
							analyzeBtn.disabled =
								v.trim().length === 0;
					}

					update();
					textarea.addEventListener(
						"input",
						update,
					);
					textarea.addEventListener("paste", () =>
						setTimeout(update, 50),
					);

					// X√≥a output khi thay ƒë·ªïi n·ªôi dung
					textarea.addEventListener("input", () =>
						renderOutput(null),
					);

					if (analyzeBtn) {
						analyzeBtn.addEventListener(
							"click",
							async function () {
								if (analyzeBtn.disabled) return;
								const text = (
									textarea.value || ""
								).trim();
								if (!text) return;
								analyzeBtn.disabled = true;
								const prev = analyzeBtn.innerHTML;
								analyzeBtn.innerHTML =
									"ƒêang ph√¢n t√≠ch...";

								// T·ª± ƒë·ªông cu·ªôn xu·ªëng ph·∫ßn ph√¢n t√≠ch tin nh·∫Øn
								const analysisSection =
									document.querySelector(
										'h2[data-testid="text-form-title"]',
									);
								if (analysisSection) {
									analysisSection.scrollIntoView({
										behavior: "smooth",
										block: "start",
									});
								}

								let result = null;
								try {
									// G·ªçi t·ªõi proxy backend (kh√¥ng l·ªô API key, kh√¥ng l·ªói CORS)
									const res = await fetch(
										"http://localhost:3000/analyze",
										{
											method: "POST",
											headers: {
												"Content-Type":
													"application/json",
											},
											body: JSON.stringify({
												text,
											}),
										},
									);
									if (!res.ok) {
										const body = await res
											.text()
											.catch(() => "<no body>");
										console.error(
											"Proxy error",
											res.status,
											body,
										);
										alert(
											"L·ªói proxy: " +
												res.status +
												". Xem console.",
										);
									} else {
										result = await res.json();
										window.dispatchEvent(
											new CustomEvent(
												"analysis:result",
												{ detail: result },
											),
										);
									}
								} catch (err) {
									console.error(
										"Network error",
										err,
									);
									alert(
										"L·ªói k·∫øt n·ªëi t·ªõi proxy. Xem console.",
									);
								}

								// Scroll to analysis section
								document.getElementById("ai-analyzer").scrollIntoView({
									behavior: "smooth",
								});


								renderOutput(result);
								analyzeBtn.disabled = false;
								analyzeBtn.innerHTML = prev;
								update();
							},
						);
					}
				}

				if (document.readyState === "loading")
					document.addEventListener(
						"DOMContentLoaded",
						init,
					);
				else init();
			})();
		</script>
		<div
			id="replit-dev-banner"
			style="opacity: 0; display: none"
		>
			<div class="banner-text">
				This is a temporary development preview,
				and these links are not for public use.
				<a
					href="https://docs.replit.com/category/replit-deployments?ref=replit-dev-banner"
					target="_blank"
					class="banner-link"
					>Deploy your app</a
				>
				for secure sharing or use an invite link.
			</div>
			<button
				class="banner-close"
				aria-label="Close banner"
			>
				<svg
					width="16"
					height="16"
					viewBox="0 0 24 24"
					fill="currentColor"
				>
					<path
						d="M5.293 5.293a1 1 0 0 1 1.414 0L12 10.586l5.293-5.293a1 1 0 1 1 1.414 1.414L13.414 12l5.293 5.293a1 1 0 0 1-1.414 1.414L12 13.414l-5.293 5.293a1 1 0 0 1-1.414-1.414L10.586 12 5.293 6.707a1 1 0 0 1 0-1.414z"
					></path>
				</svg>
			</button>
		</div>
		<script>
			document.addEventListener(
				"DOMContentLoaded",
				() => {
					const analyzeNowBtn =
						document.querySelector(
							'[data-testid="button-analyze-now"]',
						);
					const learnMoreBtn =
						document.querySelector(
							'[data-testid="button-learn-more"]',
						);

					// Khi b·∫•m "Ph√¢n T√≠ch Ngay" ‚Üí cu·ªôn ƒë·∫øn ph·∫ßn Ph√¢n T√≠ch Tin Nh·∫Øn
					if (analyzeNowBtn) {
						analyzeNowBtn.addEventListener(
							"click",
							() => {
								const target =
									document.getElementById(
										"analyze",
									);
								if (target)
									target.scrollIntoView({
										behavior: "smooth",
										block: "start",
									});
							},
						);
					}

					// Khi b·∫•m "T√¨m Hi·ªÉu Th√™m" ‚Üí cu·ªôn ƒë·∫øn ph·∫ßn Th√¥ng tin (·ªü ƒë√¢y l√† section "prevention")
					if (learnMoreBtn) {
						learnMoreBtn.addEventListener(
							"click",
							() => {
								const target =
									document.getElementById(
										"prevention",
									);
								if (target)
									target.scrollIntoView({
										behavior: "smooth",
										block: "start",
									});
							},
						);
					}
				},
			);
		</script>


		<!-- G·ªçi script ri√™ng -->
		<script src="analyzer.js" type="module" defer></script>
		
		<script type="module">
			"use strict";
			(() => {
				var O = "0.3.1";
				var v = {
						HIGHLIGHT_COLOR: "#0079F2",
						HIGHLIGHT_BG: "#0079F210",
						ALLOWED_DOMAIN: ".replit.dev",
						THEME_PREVIEW_STYLE_ID:
							"replit-theme-preview",
					},
					Q = `
  [contenteditable] {
    outline: none !important;
  }

  [contenteditable]:focus {
    outline: none !important;
  }
`,
					Z = `
  .beacon-highlighter {
    content: '';
    position: absolute;
    z-index: ${Number.MAX_SAFE_INTEGER - 3};
    box-sizing: border-box;
    pointer-events: none;
    outline: 2px dashed ${v.HIGHLIGHT_COLOR} !important;
    outline-offset: 0 !important;
    margin: 0 !important;
    padding: 0 !important;
    transform: none !important;
    background: ${v.HIGHLIGHT_BG} !important;
    opacity: 0;
  }
  
  .beacon-hover-highlighter {
    position: fixed;
    z-index: ${Number.MAX_SAFE_INTEGER};
  }
  
  .beacon-selected-highlighter {
    position: fixed;
    pointer-events: none;
    outline: 2px solid ${v.HIGHLIGHT_COLOR} !important;
    outline-offset: 3px !important;
    background: none !important;
  }
  
  .beacon-label {
    position: absolute;
    background-color: ${v.HIGHLIGHT_COLOR};
    color: #FFFFFF;
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 14px;
    font-family: monospace;
    line-height: 1;
    white-space: nowrap;
    box-shadow: 0 2px 4px rgba(0,0,0,0.2);
    transform: translateY(-100%);
    margin-top: -4px;
    left: 0;
    z-index: ${Number.MAX_SAFE_INTEGER - 2};
    pointer-events: none;
    opacity: 0;
  }
  
  .beacon-hover-label {
    position: fixed;
    z-index: ${Number.MAX_SAFE_INTEGER};
  }
  
  .beacon-selected-label {
    position: fixed;
    pointer-events: none;
  }
  
  .beacon-sibling-highlighter {
    position: fixed;
    pointer-events: none;
    outline: 2px dashed ${v.HIGHLIGHT_COLOR} !important;
    outline-offset: 0 !important;
    margin: 0 !important;
    padding: 0 !important;
    transform: none !important;
    background: ${v.HIGHLIGHT_BG} !important;
  }
`;
				function De(e, i) {
					return (
						(e[13] = 1),
						(e[14] = i >> 8),
						(e[15] = i & 255),
						(e[16] = i >> 8),
						(e[17] = i & 255),
						e
					);
				}
				var oe = 112,
					ae = 72,
					le = 89,
					ce = 115,
					W;
				function Ie() {
					let e = new Int32Array(256);
					for (let i = 0; i < 256; i++) {
						let t = i;
						for (let n = 0; n < 8; n++)
							t =
								t & 1
									? 3988292384 ^ (t >>> 1)
									: t >>> 1;
						e[i] = t;
					}
					return e;
				}
				function Ne(e) {
					let i = -1;
					W || (W = Ie());
					for (let t = 0; t < e.length; t++)
						i = W[(i ^ e[t]) & 255] ^ (i >>> 8);
					return i ^ -1;
				}
				function Me(e) {
					let i = e.length - 1;
					for (let t = i; t >= 4; t--)
						if (
							e[t - 4] === 9 &&
							e[t - 3] === oe &&
							e[t - 2] === ae &&
							e[t - 1] === le &&
							e[t] === ce
						)
							return t - 3;
					return 0;
				}
				function _e(e, i, t = !1) {
					let n = new Uint8Array(13);
					((i *= 39.3701),
						(n[0] = oe),
						(n[1] = ae),
						(n[2] = le),
						(n[3] = ce),
						(n[4] = i >>> 24),
						(n[5] = i >>> 16),
						(n[6] = i >>> 8),
						(n[7] = i & 255),
						(n[8] = n[4]),
						(n[9] = n[5]),
						(n[10] = n[6]),
						(n[11] = n[7]),
						(n[12] = 1));
					let o = Ne(n),
						r = new Uint8Array(4);
					if (
						((r[0] = o >>> 24),
						(r[1] = o >>> 16),
						(r[2] = o >>> 8),
						(r[3] = o & 255),
						t)
					) {
						let a = Me(e);
						return (
							e.set(n, a),
							e.set(r, a + 13),
							e
						);
					} else {
						let a = new Uint8Array(4);
						((a[0] = 0),
							(a[1] = 0),
							(a[2] = 0),
							(a[3] = 9));
						let s = new Uint8Array(54);
						return (
							s.set(e, 0),
							s.set(a, 33),
							s.set(n, 37),
							s.set(r, 50),
							s
						);
					}
				}
				var he = "[modern-screenshot]",
					C = typeof window < "u",
					Re = C && "Worker" in window,
					Pe = C && "atob" in window,
					qt = C && "btoa" in window,
					V = C
						? window.navigator?.userAgent
						: "",
					de = V.includes("Chrome"),
					k = V.includes("AppleWebKit") && !de,
					q = V.includes("Firefox"),
					Oe = (e) => e && "__CONTEXT__" in e,
					ke = (e) =>
						e.constructor.name ===
						"CSSFontFaceRule",
					Fe = (e) =>
						e.constructor.name ===
						"CSSImportRule",
					S = (e) => e.nodeType === 1,
					N = (e) =>
						typeof e.className == "object",
					ge = (e) => e.tagName === "image",
					Ue = (e) => e.tagName === "use",
					x = (e) =>
						S(e) && typeof e.style < "u" && !N(e),
					$e = (e) => e.nodeType === 8,
					Be = (e) => e.nodeType === 3,
					L = (e) => e.tagName === "IMG",
					F = (e) => e.tagName === "VIDEO",
					We = (e) => e.tagName === "CANVAS",
					Ge = (e) => e.tagName === "TEXTAREA",
					Ve = (e) => e.tagName === "INPUT",
					qe = (e) => e.tagName === "STYLE",
					je = (e) => e.tagName === "SCRIPT",
					ze = (e) => e.tagName === "SELECT",
					Ye = (e) => e.tagName === "SLOT",
					Xe = (e) => e.tagName === "IFRAME",
					Ke = (...e) => console.warn(he, ...e);
				function Je(e) {
					let i = e?.createElement?.("canvas");
					return (
						i && (i.height = i.width = 1),
						!!i &&
							"toDataURL" in i &&
							!!i
								.toDataURL("image/webp")
								.includes("image/webp")
					);
				}
				var G = (e) => e.startsWith("data:");
				function ue(e, i) {
					if (e.match(/^[a-z]+:\/\//i)) return e;
					if (C && e.match(/^\/\//))
						return window.location.protocol + e;
					if (e.match(/^[a-z]+:/i) || !C)
						return e;
					let t =
							U().implementation.createHTMLDocument(),
						n = t.createElement("base"),
						o = t.createElement("a");
					return (
						t.head.appendChild(n),
						t.body.appendChild(o),
						i && (n.href = i),
						(o.href = e),
						o.href
					);
				}
				function U(e) {
					return (
						(e && S(e) ? e?.ownerDocument : e) ??
						window.document
					);
				}
				var $ = "http://www.w3.org/2000/svg";
				function Qe(e, i, t) {
					let n = U(t).createElementNS($, "svg");
					return (
						n.setAttributeNS(
							null,
							"width",
							e.toString(),
						),
						n.setAttributeNS(
							null,
							"height",
							i.toString(),
						),
						n.setAttributeNS(
							null,
							"viewBox",
							`0 0 ${e} ${i}`,
						),
						n
					);
				}
				function Ze(e, i) {
					let t =
						new XMLSerializer().serializeToString(
							e,
						);
					return (
						i &&
							(t = t.replace(
								/[\u0000-\u0008\v\f\u000E-\u001F\uD800-\uDFFF\uFFFE\uFFFF]/gu,
								"",
							)),
						`data:image/svg+xml;charset=utf-8,${encodeURIComponent(t)}`
					);
				}
				async function et(
					e,
					i = "image/png",
					t = 1,
				) {
					try {
						return await new Promise((n, o) => {
							e.toBlob(
								(r) => {
									r
										? n(r)
										: o(
												new Error("Blob is null"),
											);
								},
								i,
								t,
							);
						});
					} catch (n) {
						if (Pe) return tt(e.toDataURL(i, t));
						throw n;
					}
				}
				function tt(e) {
					let [i, t] = e.split(","),
						n =
							i.match(/data:(.+);/)?.[1] ??
							void 0,
						o = window.atob(t),
						r = o.length,
						a = new Uint8Array(r);
					for (let s = 0; s < r; s += 1)
						a[s] = o.charCodeAt(s);
					return new Blob([a], { type: n });
				}
				function me(e, i) {
					return new Promise((t, n) => {
						let o = new FileReader();
						((o.onload = () => t(o.result)),
							(o.onerror = () => n(o.error)),
							(o.onabort = () =>
								n(
									new Error(
										`Failed read blob to ${i}`,
									),
								)),
							i === "dataUrl"
								? o.readAsDataURL(e)
								: i === "arrayBuffer" &&
									o.readAsArrayBuffer(e));
					});
				}
				var it = (e) => me(e, "dataUrl"),
					nt = (e) => me(e, "arrayBuffer");
				function H(e, i) {
					let t = U(i).createElement("img");
					return (
						(t.decoding = "sync"),
						(t.loading = "eager"),
						(t.src = e),
						t
					);
				}
				function D(e, i) {
					return new Promise((t) => {
						let {
								timeout: n,
								ownerDocument: o,
								onError: r,
								onWarn: a,
							} = i ?? {},
							s =
								typeof e == "string"
									? H(e, U(o))
									: e,
							c = null,
							h = null;
						function l() {
							(t(s), c && clearTimeout(c), h?.());
						}
						if (
							(n && (c = setTimeout(l, n)), F(s))
						) {
							let d = s.currentSrc || s.src;
							if (!d)
								return s.poster
									? D(s.poster, i).then(t)
									: l();
							if (s.readyState >= 2) return l();
							let g = l,
								m = (u) => {
									(a?.("Failed video load", d, u),
										r?.(u),
										l());
								};
							((h = () => {
								(s.removeEventListener(
									"loadeddata",
									g,
								),
									s.removeEventListener(
										"error",
										m,
									));
							}),
								s.addEventListener(
									"loadeddata",
									g,
									{ once: !0 },
								),
								s.addEventListener("error", m, {
									once: !0,
								}));
						} else {
							let d = ge(s)
								? s.href.baseVal
								: s.currentSrc || s.src;
							if (!d) return l();
							let g = async () => {
									if (L(s) && "decode" in s)
										try {
											await s.decode();
										} catch (u) {
											a?.(
												"Failed to decode image, trying to render anyway",
												s.dataset.originalSrc ||
													d,
												u,
											);
										}
									l();
								},
								m = (u) => {
									(a?.(
										"Failed image load",
										s.dataset.originalSrc || d,
										u,
									),
										l());
								};
							if (L(s) && s.complete) return g();
							((h = () => {
								(s.removeEventListener("load", g),
									s.removeEventListener(
										"error",
										m,
									));
							}),
								s.addEventListener("load", g, {
									once: !0,
								}),
								s.addEventListener("error", m, {
									once: !0,
								}));
						}
					});
				}
				async function rt(e, i) {
					x(e) &&
						(L(e) || F(e)
							? await D(e, i)
							: await Promise.all(
									["img", "video"].flatMap((t) =>
										Array.from(
											e.querySelectorAll(t),
										).map((n) => D(n, i)),
									),
								));
				}
				var fe = (function () {
					let i = 0,
						t = () =>
							`0000${((Math.random() * 36 ** 4) << 0).toString(36)}`.slice(
								-4,
							);
					return () => ((i += 1), `u${t()}${i}`);
				})();
				function pe(e) {
					return e
						?.split(",")
						.map((i) =>
							i
								.trim()
								.replace(/"|'/g, "")
								.toLowerCase(),
						)
						.filter(Boolean);
				}
				var ee = 0;
				function st(e) {
					let i = `${he}[#${ee}]`;
					return (
						ee++,
						{
							time: (t) =>
								e && console.time(`${i} ${t}`),
							timeEnd: (t) =>
								e && console.timeEnd(`${i} ${t}`),
							warn: (...t) => e && Ke(...t),
						}
					);
				}
				function ot(e) {
					return {
						cache: e ? "no-cache" : "force-cache",
					};
				}
				async function j(e, i) {
					return Oe(e)
						? e
						: at(e, { ...i, autoDestruct: !0 });
				}
				async function at(e, i) {
					let {
							scale: t = 1,
							workerUrl: n,
							workerNumber: o = 1,
						} = i || {},
						r = !!i?.debug,
						a = i?.features ?? !0,
						s =
							e.ownerDocument ??
							(C ? window.document : void 0),
						c =
							e.ownerDocument?.defaultView ??
							(C ? window : void 0),
						h = new Map(),
						l = {
							width: 0,
							height: 0,
							quality: 1,
							type: "image/png",
							scale: t,
							backgroundColor: null,
							style: null,
							filter: null,
							maximumCanvasSize: 0,
							timeout: 3e4,
							progress: null,
							debug: r,
							fetch: {
								requestInit: ot(
									i?.fetch?.bypassingCache,
								),
								placeholderImage:
									"data:image/png;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",
								bypassingCache: !1,
								...i?.fetch,
							},
							fetchFn: null,
							font: {},
							drawImageInterval: 100,
							workerUrl: null,
							workerNumber: o,
							onCloneNode: null,
							onEmbedNode: null,
							onCreateForeignObjectSvg: null,
							includeStyleProperties: null,
							autoDestruct: !1,
							...i,
							__CONTEXT__: !0,
							log: st(r),
							node: e,
							ownerDocument: s,
							ownerWindow: c,
							dpi: t === 1 ? null : 96 * t,
							svgStyleElement: be(s),
							svgDefsElement: s?.createElementNS(
								$,
								"defs",
							),
							svgStyles: new Map(),
							defaultComputedStyles: new Map(),
							workers: [
								...Array.from({
									length: Re && n && o ? o : 0,
								}),
							]
								.map(() => {
									try {
										let m = new Worker(n);
										return (
											(m.onmessage = async (
												u,
											) => {
												let {
													url: f,
													result: p,
												} = u.data;
												p
													? h.get(f)?.resolve?.(p)
													: h
															.get(f)
															?.reject?.(
																new Error(
																	`Error receiving message from worker: ${f}`,
																),
															);
											}),
											(m.onmessageerror = (u) => {
												let { url: f } = u.data;
												h.get(f)?.reject?.(
													new Error(
														`Error receiving message from worker: ${f}`,
													),
												);
											}),
											m
										);
									} catch (m) {
										return (
											l.log.warn(
												"Failed to new Worker",
												m,
											),
											null
										);
									}
								})
								.filter(Boolean),
							fontFamilies: new Map(),
							fontCssTexts: new Map(),
							acceptOfImage: `${[Je(s) && "image/webp", "image/svg+xml", "image/*", "*/*"].filter(Boolean).join(",")};q=0.8`,
							requests: h,
							drawImageCount: 0,
							tasks: [],
							features: a,
							isEnable: (m) =>
								m === "restoreScrollPosition"
									? typeof a == "boolean"
										? !1
										: (a[m] ?? !1)
									: typeof a == "boolean"
										? a
										: (a[m] ?? !0),
						};
					(l.log.time("wait until load"),
						await rt(e, {
							timeout: l.timeout,
							onWarn: l.log.warn,
						}),
						l.log.timeEnd("wait until load"));
					let { width: d, height: g } = lt(e, l);
					return (
						(l.width = d),
						(l.height = g),
						l
					);
				}
				function be(e) {
					if (!e) return;
					let i = e.createElement("style"),
						t = i.ownerDocument.createTextNode(`
.______background-clip--text {
  background-clip: text;
  -webkit-background-clip: text;
}
`);
					return (i.appendChild(t), i);
				}
				function lt(e, i) {
					let { width: t, height: n } = i;
					if (S(e) && (!t || !n)) {
						let o = e.getBoundingClientRect();
						((t =
							t ||
							o.width ||
							Number(e.getAttribute("width")) ||
							0),
							(n =
								n ||
								o.height ||
								Number(
									e.getAttribute("height"),
								) ||
								0));
					}
					return { width: t, height: n };
				}
				async function ct(e, i) {
					let {
						log: t,
						timeout: n,
						drawImageCount: o,
						drawImageInterval: r,
					} = i;
					t.time("image to canvas");
					let a = await D(e, {
							timeout: n,
							onWarn: i.log.warn,
						}),
						{ canvas: s, context2d: c } = ht(
							e.ownerDocument,
							i,
						),
						h = () => {
							try {
								c?.drawImage(
									a,
									0,
									0,
									s.width,
									s.height,
								);
							} catch (l) {
								i.log.warn(
									"Failed to drawImage",
									l,
								);
							}
						};
					if (
						(h(), i.isEnable("fixSvgXmlDecode"))
					)
						for (let l = 0; l < o; l++)
							await new Promise((d) => {
								setTimeout(() => {
									(h(), d());
								}, l + r);
							});
					return (
						(i.drawImageCount = 0),
						t.timeEnd("image to canvas"),
						s
					);
				}
				function ht(e, i) {
					let {
							width: t,
							height: n,
							scale: o,
							backgroundColor: r,
							maximumCanvasSize: a,
						} = i,
						s = e.createElement("canvas");
					((s.width = Math.floor(t * o)),
						(s.height = Math.floor(n * o)),
						(s.style.width = `${t}px`),
						(s.style.height = `${n}px`),
						a &&
							(s.width > a || s.height > a) &&
							(s.width > a && s.height > a
								? s.width > s.height
									? ((s.height *= a / s.width),
										(s.width = a))
									: ((s.width *= a / s.height),
										(s.height = a))
								: s.width > a
									? ((s.height *= a / s.width),
										(s.width = a))
									: ((s.width *= a / s.height),
										(s.height = a))));
					let c = s.getContext("2d");
					return (
						c &&
							r &&
							((c.fillStyle = r),
							c.fillRect(
								0,
								0,
								s.width,
								s.height,
							)),
						{ canvas: s, context2d: c }
					);
				}
				function Ee(e, i) {
					if (e.ownerDocument)
						try {
							let r = e.toDataURL();
							if (r !== "data:,")
								return H(r, e.ownerDocument);
						} catch (r) {
							i.log.warn(
								"Failed to clone canvas",
								r,
							);
						}
					let t = e.cloneNode(!1),
						n = e.getContext("2d"),
						o = t.getContext("2d");
					try {
						return (
							n &&
								o &&
								o.putImageData(
									n.getImageData(
										0,
										0,
										e.width,
										e.height,
									),
									0,
									0,
								),
							t
						);
					} catch (r) {
						i.log.warn(
							"Failed to clone canvas",
							r,
						);
					}
					return t;
				}
				function dt(e, i) {
					try {
						if (e?.contentDocument?.body)
							return z(e.contentDocument.body, i);
					} catch (t) {
						i.log.warn(
							"Failed to clone iframe",
							t,
						);
					}
					return e.cloneNode(!1);
				}
				function gt(e) {
					let i = e.cloneNode(!1);
					return (
						e.currentSrc &&
							e.currentSrc !== e.src &&
							((i.src = e.currentSrc),
							(i.srcset = "")),
						i.loading === "lazy" &&
							(i.loading = "eager"),
						i
					);
				}
				async function ut(e, i) {
					if (
						e.ownerDocument &&
						!e.currentSrc &&
						e.poster
					)
						return H(e.poster, e.ownerDocument);
					let t = e.cloneNode(!1);
					((t.crossOrigin = "anonymous"),
						e.currentSrc &&
							e.currentSrc !== e.src &&
							(t.src = e.currentSrc));
					let n = t.ownerDocument;
					if (n) {
						let o = !0;
						if (
							(await D(t, {
								onError: () => (o = !1),
								onWarn: i.log.warn,
							}),
							!o)
						)
							return e.poster
								? H(e.poster, e.ownerDocument)
								: t;
						((t.currentTime = e.currentTime),
							await new Promise((a) => {
								t.addEventListener("seeked", a, {
									once: !0,
								});
							}));
						let r = n.createElement("canvas");
						((r.width = e.offsetWidth),
							(r.height = e.offsetHeight));
						try {
							let a = r.getContext("2d");
							a &&
								a.drawImage(
									t,
									0,
									0,
									r.width,
									r.height,
								);
						} catch (a) {
							return (
								i.log.warn(
									"Failed to clone video",
									a,
								),
								e.poster
									? H(e.poster, e.ownerDocument)
									: t
							);
						}
						return Ee(r, i);
					}
					return t;
				}
				function mt(e, i) {
					return We(e)
						? Ee(e, i)
						: Xe(e)
							? dt(e, i)
							: L(e)
								? gt(e)
								: F(e)
									? ut(e, i)
									: e.cloneNode(!1);
				}
				function ft(e) {
					let i = e.sandbox;
					if (!i) {
						let { ownerDocument: t } = e;
						try {
							t &&
								((i = t.createElement("iframe")),
								(i.id = `__SANDBOX__-${fe()}`),
								(i.width = "0"),
								(i.height = "0"),
								(i.style.visibility = "hidden"),
								(i.style.position = "fixed"),
								t.body.appendChild(i),
								i.contentWindow?.document.write(
									'<!DOCTYPE html><meta charset="UTF-8"><title></title><body>',
								),
								(e.sandbox = i));
						} catch (n) {
							e.log.warn(
								"Failed to getSandBox",
								n,
							);
						}
					}
					return i;
				}
				var pt = [
						"width",
						"height",
						"-webkit-text-fill-color",
					],
					bt = ["stroke", "fill"];
				function we(e, i, t) {
					let { defaultComputedStyles: n } = t,
						o = e.nodeName.toLowerCase(),
						r = N(e) && o !== "svg",
						a = r
							? bt
									.map((f) => [
										f,
										e.getAttribute(f),
									])
									.filter(([, f]) => f !== null)
							: [],
						s = [
							r && "svg",
							o,
							a
								.map((f, p) => `${f}=${p}`)
								.join(","),
							i,
						]
							.filter(Boolean)
							.join(":");
					if (n.has(s)) return n.get(s);
					let h = ft(t)?.contentWindow;
					if (!h) return new Map();
					let l = h?.document,
						d,
						g;
					(r
						? ((d = l.createElementNS($, "svg")),
							(g =
								d.ownerDocument.createElementNS(
									d.namespaceURI,
									o,
								)),
							a.forEach(([f, p]) => {
								g.setAttributeNS(null, f, p);
							}),
							d.appendChild(g))
						: (d = g = l.createElement(o)),
						(g.textContent = " "),
						l.body.appendChild(d));
					let m = h.getComputedStyle(g, i),
						u = new Map();
					for (
						let f = m.length, p = 0;
						p < f;
						p++
					) {
						let b = m.item(p);
						pt.includes(b) ||
							u.set(b, m.getPropertyValue(b));
					}
					return (
						l.body.removeChild(d),
						n.set(s, u),
						u
					);
				}
				function ve(e, i, t) {
					let n = new Map(),
						o = [],
						r = new Map();
					if (t) for (let s of t) a(s);
					else
						for (
							let s = e.length, c = 0;
							c < s;
							c++
						) {
							let h = e.item(c);
							a(h);
						}
					for (
						let s = o.length, c = 0;
						c < s;
						c++
					)
						r.get(o[c])?.forEach((h, l) =>
							n.set(l, h),
						);
					function a(s) {
						let c = e.getPropertyValue(s),
							h = e.getPropertyPriority(s),
							l = s.lastIndexOf("-"),
							d =
								l > -1
									? s.substring(0, l)
									: void 0;
						if (d) {
							let g = r.get(d);
							(g ||
								((g = new Map()), r.set(d, g)),
								g.set(s, [c, h]));
						}
						(i.get(s) === c && !h) ||
							(d ? o.push(d) : n.set(s, [c, h]));
					}
					return n;
				}
				function Et(e, i, t, n) {
					let {
							ownerWindow: o,
							includeStyleProperties: r,
							currentParentNodeStyle: a,
						} = n,
						s = i.style,
						c = o.getComputedStyle(e),
						h = we(e, null, n);
					a?.forEach((d, g) => {
						h.delete(g);
					});
					let l = ve(c, h, r);
					(l.delete("transition-property"),
						l.delete("all"),
						l.delete("d"),
						l.delete("content"),
						t &&
							(l.delete("margin-top"),
							l.delete("margin-right"),
							l.delete("margin-bottom"),
							l.delete("margin-left"),
							l.delete("margin-block-start"),
							l.delete("margin-block-end"),
							l.delete("margin-inline-start"),
							l.delete("margin-inline-end"),
							l.set("box-sizing", [
								"border-box",
								"",
							])),
						l.get("background-clip")?.[0] ===
							"text" &&
							i.classList.add(
								"______background-clip--text",
							),
						de &&
							(l.has("font-kerning") ||
								l.set("font-kerning", [
									"normal",
									"",
								]),
							(l.get("overflow-x")?.[0] ===
								"hidden" ||
								l.get("overflow-y")?.[0] ===
									"hidden") &&
								l.get("text-overflow")?.[0] ===
									"ellipsis" &&
								e.scrollWidth === e.clientWidth &&
								l.set("text-overflow", [
									"clip",
									"",
								])));
					for (
						let d = s.length, g = 0;
						g < d;
						g++
					)
						s.removeProperty(s.item(g));
					return (
						l.forEach(([d, g], m) => {
							s.setProperty(m, d, g);
						}),
						l
					);
				}
				function wt(e, i) {
					(Ge(e) || Ve(e) || ze(e)) &&
						i.setAttribute("value", e.value);
				}
				var vt = [":before", ":after"],
					yt = [
						":-webkit-scrollbar",
						":-webkit-scrollbar-button",
						":-webkit-scrollbar-thumb",
						":-webkit-scrollbar-track",
						":-webkit-scrollbar-track-piece",
						":-webkit-scrollbar-corner",
						":-webkit-resizer",
					];
				function St(e, i, t, n, o) {
					let {
						ownerWindow: r,
						svgStyleElement: a,
						svgStyles: s,
						currentNodeStyle: c,
					} = n;
					if (!a || !r) return;
					function h(l) {
						let d = r.getComputedStyle(e, l),
							g = d.getPropertyValue("content");
						if (!g || g === "none") return;
						(o?.(g),
							(g = g.replace(
								/(')|(")|(counter\(.+\))/g,
								"",
							)));
						let m = [fe()],
							u = we(e, l, n);
						c?.forEach((E, y) => {
							u.delete(y);
						});
						let f = ve(
							d,
							u,
							n.includeStyleProperties,
						);
						(f.delete("content"),
							f.delete("-webkit-locale"),
							f.get("background-clip")?.[0] ===
								"text" &&
								i.classList.add(
									"______background-clip--text",
								));
						let p = [`content: '${g}';`];
						if (
							(f.forEach(([E, y], T) => {
								p.push(
									`${T}: ${E}${y ? " !important" : ""};`,
								);
							}),
							p.length === 1)
						)
							return;
						try {
							i.className = [
								i.className,
								...m,
							].join(" ");
						} catch (E) {
							n.log.warn(
								"Failed to copyPseudoClass",
								E,
							);
							return;
						}
						let b = p.join(`
  `),
							w = s.get(b);
						(w || ((w = []), s.set(b, w)),
							w.push(`.${m[0]}:${l}`));
					}
					(vt.forEach(h), t && yt.forEach(h));
				}
				var te = new Set(["symbol"]);
				async function ie(e, i, t, n, o) {
					if (
						(S(t) && (qe(t) || je(t))) ||
						(n.filter && !n.filter(t))
					)
						return;
					te.has(i.nodeName) || te.has(t.nodeName)
						? (n.currentParentNodeStyle = void 0)
						: (n.currentParentNodeStyle =
								n.currentNodeStyle);
					let r = await z(t, n, !1, o);
					(n.isEnable("restoreScrollPosition") &&
						At(e, r),
						i.appendChild(r));
				}
				async function ne(e, i, t, n) {
					let o =
						(S(e)
							? e.shadowRoot?.firstChild
							: void 0) ?? e.firstChild;
					for (let r = o; r; r = r.nextSibling)
						if (!$e(r))
							if (
								S(r) &&
								Ye(r) &&
								typeof r.assignedNodes ==
									"function"
							) {
								let a = r.assignedNodes();
								for (let s = 0; s < a.length; s++)
									await ie(e, i, a[s], t, n);
							} else await ie(e, i, r, t, n);
				}
				function At(e, i) {
					if (!x(e) || !x(i)) return;
					let { scrollTop: t, scrollLeft: n } = e;
					if (!t && !n) return;
					let { transform: o } = i.style,
						r = new DOMMatrix(o),
						{ a, b: s, c, d: h } = r;
					((r.a = 1),
						(r.b = 0),
						(r.c = 0),
						(r.d = 1),
						r.translateSelf(-n, -t),
						(r.a = a),
						(r.b = s),
						(r.c = c),
						(r.d = h),
						(i.style.transform = r.toString()));
				}
				function Tt(e, i) {
					let {
							backgroundColor: t,
							width: n,
							height: o,
							style: r,
						} = i,
						a = e.style;
					if (
						(t &&
							a.setProperty(
								"background-color",
								t,
								"important",
							),
						n &&
							a.setProperty(
								"width",
								`${n}px`,
								"important",
							),
						o &&
							a.setProperty(
								"height",
								`${o}px`,
								"important",
							),
						r)
					)
						for (let s in r) a[s] = r[s];
				}
				var Ct = /^[\w-:]+$/;
				async function z(e, i, t = !1, n) {
					let {
						ownerDocument: o,
						ownerWindow: r,
						fontFamilies: a,
					} = i;
					if (o && Be(e))
						return (
							n && /\S/.test(e.data) && n(e.data),
							o.createTextNode(e.data)
						);
					if (o && r && S(e) && (x(e) || N(e))) {
						let c = await mt(e, i);
						if (
							i.isEnable(
								"removeAbnormalAttributes",
							)
						) {
							let u = c.getAttributeNames();
							for (
								let f = u.length, p = 0;
								p < f;
								p++
							) {
								let b = u[p];
								Ct.test(b) ||
									c.removeAttribute(b);
							}
						}
						let h = (i.currentNodeStyle = Et(
							e,
							c,
							t,
							i,
						));
						t && Tt(c, i);
						let l = !1;
						if (i.isEnable("copyScrollbar")) {
							let u = [
								h.get("overflow-x")?.[0],
								h.get("overflow-y")?.[0],
							];
							l =
								u.includes("scroll") ||
								((u.includes("auto") ||
									u.includes("overlay")) &&
									(e.scrollHeight >
										e.clientHeight ||
										e.scrollWidth >
											e.clientWidth));
						}
						let d = h.get("text-transform")?.[0],
							g = pe(h.get("font-family")?.[0]),
							m = g
								? (u) => {
										(d === "uppercase"
											? (u = u.toUpperCase())
											: d === "lowercase"
												? (u = u.toLowerCase())
												: d === "capitalize" &&
													(u =
														u[0].toUpperCase() +
														u.substring(1)),
											g.forEach((f) => {
												let p = a.get(f);
												(p ||
													a.set(
														f,
														(p = new Set()),
													),
													u
														.split("")
														.forEach((b) =>
															p.add(b),
														));
											}));
									}
								: void 0;
						return (
							St(e, c, l, i, m),
							wt(e, c),
							F(e) || (await ne(e, c, i, m)),
							c
						);
					}
					let s = e.cloneNode(!1);
					return (await ne(e, s, i), s);
				}
				function Ht(e) {
					if (
						((e.ownerDocument = void 0),
						(e.ownerWindow = void 0),
						(e.svgStyleElement = void 0),
						(e.svgDefsElement = void 0),
						e.svgStyles.clear(),
						e.defaultComputedStyles.clear(),
						e.sandbox)
					) {
						try {
							e.sandbox.remove();
						} catch (i) {
							e.log.warn(
								"Failed to destroyContext",
								i,
							);
						}
						e.sandbox = void 0;
					}
					((e.workers = []),
						e.fontFamilies.clear(),
						e.fontCssTexts.clear(),
						e.requests.clear(),
						(e.tasks = []));
				}
				function Lt(e) {
					let {
							url: i,
							timeout: t,
							responseType: n,
							...o
						} = e,
						r = new AbortController(),
						a = t
							? setTimeout(() => r.abort(), t)
							: void 0;
					return fetch(i, {
						signal: r.signal,
						...o,
					})
						.then((s) => {
							if (!s.ok)
								throw new Error(
									"Failed fetch, not 2xx response",
									{ cause: s },
								);
							switch (n) {
								case "arrayBuffer":
									return s.arrayBuffer();
								case "dataUrl":
									return s.blob().then(it);
								case "text":
								default:
									return s.text();
							}
						})
						.finally(() => clearTimeout(a));
				}
				function I(e, i) {
					let {
							url: t,
							requestType: n = "text",
							responseType: o = "text",
							imageDom: r,
						} = i,
						a = t,
						{
							timeout: s,
							acceptOfImage: c,
							requests: h,
							fetchFn: l,
							fetch: {
								requestInit: d,
								bypassingCache: g,
								placeholderImage: m,
							},
							font: u,
							workers: f,
							fontFamilies: p,
						} = e;
					n === "image" &&
						(k || q) &&
						e.drawImageCount++;
					let b = h.get(t);
					if (!b) {
						g &&
							g instanceof RegExp &&
							g.test(a) &&
							(a +=
								(/\?/.test(a) ? "&" : "?") +
								new Date().getTime());
						let w =
								n.startsWith("font") &&
								u &&
								u.minify,
							E = new Set();
						w &&
							n
								.split(";")[1]
								.split(",")
								.forEach((P) => {
									p.has(P) &&
										p
											.get(P)
											.forEach((J) => E.add(J));
								});
						let y = w && E.size,
							T = {
								url: a,
								timeout: s,
								responseType: y
									? "arrayBuffer"
									: o,
								headers:
									n === "image"
										? { accept: c }
										: void 0,
								...d,
							};
						((b = {
							type: n,
							resolve: void 0,
							reject: void 0,
							response: null,
						}),
							(b.response = (async () => {
								if (l && n === "image") {
									let A = await l(t);
									if (A) return A;
								}
								return !k &&
									t.startsWith("http") &&
									f.length
									? new Promise((A, P) => {
											(f[
												h.size & (f.length - 1)
											].postMessage({
												rawUrl: t,
												...T,
											}),
												(b.resolve = A),
												(b.reject = P));
										})
									: Lt(T);
							})().catch((A) => {
								if (
									(h.delete(t),
									n === "image" && m)
								)
									return (
										e.log.warn(
											"Failed to fetch image base64, trying to use placeholder image",
											a,
										),
										typeof m == "string"
											? m
											: m(r)
									);
								throw A;
							})),
							h.set(t, b));
					}
					return b.response;
				}
				async function ye(e, i, t, n) {
					if (!Se(e)) return e;
					for (let [o, r] of xt(e, i))
						try {
							let a = await I(t, {
								url: r,
								requestType: n ? "image" : "text",
								responseType: "dataUrl",
							});
							e = e.replace(Dt(o), `$1${a}$3`);
						} catch (a) {
							t.log.warn(
								"Failed to fetch css data url",
								o,
								a,
							);
						}
					return e;
				}
				function Se(e) {
					return /url\((['"]?)([^'"]+?)\1\)/.test(
						e,
					);
				}
				var Ae = /url\((['"]?)([^'"]+?)\1\)/g;
				function xt(e, i) {
					let t = [];
					return (
						e.replace(
							Ae,
							(n, o, r) => (
								t.push([r, ue(r, i)]),
								n
							),
						),
						t.filter(([n]) => !G(n))
					);
				}
				function Dt(e) {
					let i = e.replace(
						/([.*+?^${}()|\[\]\/\\])/g,
						"\\$1",
					);
					return new RegExp(
						`(url\\(['"]?)(${i})(['"]?\\))`,
						"g",
					);
				}
				var It = [
					"background-image",
					"border-image-source",
					"-webkit-border-image",
					"-webkit-mask-image",
					"list-style-image",
				];
				function Nt(e, i) {
					return It.map((t) => {
						let n = e.getPropertyValue(t);
						return !n || n === "none"
							? null
							: ((k || q) && i.drawImageCount++,
								ye(n, null, i, !0).then((o) => {
									!o ||
										n === o ||
										e.setProperty(
											t,
											o,
											e.getPropertyPriority(t),
										);
								}));
					}).filter(Boolean);
				}
				function Mt(e, i) {
					if (L(e)) {
						let t = e.currentSrc || e.src;
						if (!G(t))
							return [
								I(i, {
									url: t,
									imageDom: e,
									requestType: "image",
									responseType: "dataUrl",
								}).then((n) => {
									n &&
										((e.srcset = ""),
										(e.dataset.originalSrc = t),
										(e.src = n || ""));
								}),
							];
						(k || q) && i.drawImageCount++;
					} else if (N(e) && !G(e.href.baseVal)) {
						let t = e.href.baseVal;
						return [
							I(i, {
								url: t,
								imageDom: e,
								requestType: "image",
								responseType: "dataUrl",
							}).then((n) => {
								n &&
									((e.dataset.originalSrc = t),
									(e.href.baseVal = n || ""));
							}),
						];
					}
					return [];
				}
				function _t(e, i) {
					let {
							ownerDocument: t,
							svgDefsElement: n,
						} = i,
						o =
							e.getAttribute("href") ??
							e.getAttribute("xlink:href");
					if (!o) return [];
					let [r, a] = o.split("#");
					if (a) {
						let s = `#${a}`,
							c = t?.querySelector(`svg ${s}`);
						if (
							(r && e.setAttribute("href", s),
							n?.querySelector(s))
						)
							return [];
						if (c)
							return (
								n?.appendChild(c.cloneNode(!0)),
								[]
							);
						if (r)
							return [
								I(i, {
									url: r,
									responseType: "text",
								}).then((h) => {
									n?.insertAdjacentHTML(
										"beforeend",
										h,
									);
								}),
							];
					}
					return [];
				}
				function Te(e, i) {
					let { tasks: t } = i;
					(S(e) &&
						((L(e) || ge(e)) &&
							t.push(...Mt(e, i)),
						Ue(e) && t.push(..._t(e, i))),
						x(e) && t.push(...Nt(e.style, i)),
						e.childNodes.forEach((n) => {
							Te(n, i);
						}));
				}
				async function Rt(e, i) {
					let {
						ownerDocument: t,
						svgStyleElement: n,
						fontFamilies: o,
						fontCssTexts: r,
						tasks: a,
						font: s,
					} = i;
					if (!(!t || !n || !o.size))
						if (s && s.cssText) {
							let c = se(s.cssText, i);
							n.appendChild(
								t.createTextNode(`${c}
`),
							);
						} else {
							let c = Array.from(
								t.styleSheets,
							).filter((l) => {
								try {
									return (
										"cssRules" in l &&
										!!l.cssRules.length
									);
								} catch (d) {
									return (
										i.log.warn(
											`Error while reading CSS rules from ${l.href}`,
											d,
										),
										!1
									);
								}
							});
							(await Promise.all(
								c.flatMap((l) =>
									Array.from(l.cssRules).map(
										async (d, g) => {
											if (Fe(d)) {
												let m = g + 1,
													u = d.href,
													f = "";
												try {
													f = await I(i, {
														url: u,
														requestType: "text",
														responseType: "text",
													});
												} catch (b) {
													i.log.warn(
														`Error fetch remote css import from ${u}`,
														b,
													);
												}
												let p = f.replace(
													Ae,
													(b, w, E) =>
														b.replace(
															E,
															ue(E, u),
														),
												);
												for (let b of Ot(p))
													try {
														l.insertRule(
															b,
															b.startsWith(
																"@import",
															)
																? (m += 1)
																: l.cssRules
																		.length,
														);
													} catch (w) {
														i.log.warn(
															"Error inserting rule from remote css import",
															{
																rule: b,
																error: w,
															},
														);
													}
											}
										},
									),
								),
							),
								c
									.flatMap((l) =>
										Array.from(l.cssRules),
									)
									.filter(
										(l) =>
											ke(l) &&
											Se(
												l.style.getPropertyValue(
													"src",
												),
											) &&
											pe(
												l.style.getPropertyValue(
													"font-family",
												),
											)?.some((d) => o.has(d)),
									)
									.forEach((l) => {
										let d = l,
											g = r.get(d.cssText);
										g
											? n.appendChild(
													t.createTextNode(`${g}
`),
												)
											: a.push(
													ye(
														d.cssText,
														d.parentStyleSheet
															? d.parentStyleSheet
																	.href
															: null,
														i,
													).then((m) => {
														((m = se(m, i)),
															r.set(d.cssText, m),
															n.appendChild(
																t.createTextNode(`${m}
`),
															));
													}),
												);
									}));
						}
				}
				var Pt = /(\/\*[\s\S]*?\*\/)/g,
					re =
						/((@.*?keyframes [\s\S]*?){([\s\S]*?}\s*?)})/gi;
				function Ot(e) {
					if (e == null) return [];
					let i = [],
						t = e.replace(Pt, "");
					for (;;) {
						let r = re.exec(t);
						if (!r) break;
						i.push(r[0]);
					}
					t = t.replace(re, "");
					let n =
							/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,
						o = new RegExp(
							"((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",
							"gi",
						);
					for (;;) {
						let r = n.exec(t);
						if (r) o.lastIndex = n.lastIndex;
						else if (((r = o.exec(t)), r))
							n.lastIndex = o.lastIndex;
						else break;
						i.push(r[0]);
					}
					return i;
				}
				var kt =
						/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,
					Ft =
						/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;
				function se(e, i) {
					let { font: t } = i,
						n = t ? t?.preferredFormat : void 0;
					return n
						? e.replace(Ft, (o) => {
								for (;;) {
									let [r, , a] = kt.exec(o) || [];
									if (!a) return "";
									if (a === n)
										return `src: ${r};`;
								}
							})
						: e;
				}
				async function Ut(e, i) {
					let t = await j(e, i);
					if (S(t.node) && N(t.node))
						return t.node;
					let {
						ownerDocument: n,
						log: o,
						tasks: r,
						svgStyleElement: a,
						svgDefsElement: s,
						svgStyles: c,
						font: h,
						progress: l,
						autoDestruct: d,
						onCloneNode: g,
						onEmbedNode: m,
						onCreateForeignObjectSvg: u,
					} = t;
					o.time("clone node");
					let f = await z(t.node, t, !0);
					if (a && n) {
						let y = "";
						(c.forEach((T, A) => {
							y += `${T.join(`,
`)} {
  ${A}
}
`;
						}),
							a.appendChild(n.createTextNode(y)));
					}
					(o.timeEnd("clone node"),
						await g?.(f),
						h !== !1 &&
							S(f) &&
							(o.time("embed web font"),
							await Rt(f, t),
							o.timeEnd("embed web font")),
						o.time("embed node"),
						Te(f, t));
					let p = r.length,
						b = 0,
						w = async () => {
							for (;;) {
								let y = r.pop();
								if (!y) break;
								try {
									await y;
								} catch (T) {
									t.log.warn(
										"Failed to run task",
										T,
									);
								}
								l?.(++b, p);
							}
						};
					(l?.(b, p),
						await Promise.all(
							[...Array.from({ length: 4 })].map(
								w,
							),
						),
						o.timeEnd("embed node"),
						await m?.(f));
					let E = $t(f, t);
					return (
						s && E.insertBefore(s, E.children[0]),
						a && E.insertBefore(a, E.children[0]),
						d && Ht(t),
						await u?.(E),
						E
					);
				}
				function $t(e, i) {
					let { width: t, height: n } = i,
						o = Qe(t, n, e.ownerDocument),
						r = o.ownerDocument.createElementNS(
							o.namespaceURI,
							"foreignObject",
						);
					return (
						r.setAttributeNS(null, "x", "0%"),
						r.setAttributeNS(null, "y", "0%"),
						r.setAttributeNS(
							null,
							"width",
							"100%",
						),
						r.setAttributeNS(
							null,
							"height",
							"100%",
						),
						r.append(e),
						o.appendChild(r),
						o
					);
				}
				async function Bt(e, i) {
					let t = await j(e, i),
						n = await Ut(t),
						o = Ze(
							n,
							t.isEnable(
								"removeControlCharacter",
							),
						);
					t.autoDestruct ||
						((t.svgStyleElement = be(
							t.ownerDocument,
						)),
						(t.svgDefsElement =
							t.ownerDocument?.createElementNS(
								$,
								"defs",
							)),
						t.svgStyles.clear());
					let r = H(o, n.ownerDocument);
					return await ct(r, t);
				}
				async function Ce(e, i) {
					let t = await j(e, i),
						{
							log: n,
							type: o,
							quality: r,
							dpi: a,
						} = t,
						s = await Bt(t);
					n.time("canvas to blob");
					let c = await et(s, o, r);
					if (
						["image/png", "image/jpeg"].includes(
							o,
						) &&
						a
					) {
						let h = await nt(c.slice(0, 33)),
							l = new Uint8Array(h);
						return (
							o === "image/png"
								? (l = _e(l, a))
								: o === "image/jpeg" &&
									(l = De(l, a)),
							n.timeEnd("canvas to blob"),
							new Blob([l, c.slice(33)], {
								type: o,
							})
						);
					}
					return (n.timeEnd("canvas to blob"), c);
				}
				var M = {
					METADATA: "data-replit-metadata",
					COMPONENT_NAME: "data-component-name",
				};
				function He(e) {
					if (e.startsWith("http://localhost:"))
						return !0;
					try {
						return new URL(e).hostname.endsWith(
							v.ALLOWED_DOMAIN,
						);
					} catch {
						return !1;
					}
				}
				function X(e) {
					if (!e) return null;
					let i = document.elementFromPoint(
						e.clientX,
						e.clientY,
					);
					return i instanceof HTMLElement
						? i
						: null;
				}
				function Jt(e, i = 300) {
					if (!e) return "";
					let t = String(e);
					return t.length <= i
						? t
						: t.slice(0, i) + "...";
				}
				function Y(e) {
					if (e)
						return {
							tagName: e.tagName.toLowerCase(),
							className: e.className.toString
								? e.className.toString()
								: String(e.className),
							textContent: e.textContent ?? "",
							id: e.id,
						};
				}
				function B(e) {
					return (
						e.getAttribute(M.COMPONENT_NAME) ??
						e.tagName.toLowerCase()
					);
				}
				function K(e) {
					let i = window.getComputedStyle(e),
						t = e.parentElement,
						n = e.nextElementSibling,
						o = t?.parentElement ?? null,
						r = {
							backgroundColor: i.backgroundColor,
							color: i.color,
							display: i.display,
							position: i.position,
							width: i.width,
							height: i.height,
							fontSize: i.fontSize,
							fontFamily: i.fontFamily,
							fontWeight: i.fontWeight,
							margin: i.margin,
							padding: i.padding,
							textAlign: i.textAlign,
						};
					return {
						elementPath:
							e.getAttribute(M.METADATA) ?? "",
						elementName: B(e),
						textContent: e.textContent ?? "",
						originalTextContent: e.getAttribute(
							"data-original-text",
						)
							? decodeURIComponent(
									e.getAttribute(
										"data-original-text",
									) ?? "",
								)
							: void 0,
						srcAttribute:
							e.getAttribute("src") ?? "",
						hasChildElements:
							e.childElementCount > 0,
						id: e.id,
						className: e.className.toString
							? e.className.toString()
							: String(e.className),
						computedStyles: r,
						textAlign: i.textAlign,
						relatedElements: {
							parent: Y(t),
							nextSibling: Y(n),
							grandParent: Y(o),
						},
					};
				}
				async function Le(e) {
					try {
						let t =
							window.getComputedStyle(
								e,
							).backgroundColor;
						return (
							Wt(t) &&
								(t = window.getComputedStyle(
									document.documentElement,
								).backgroundColor),
							await Ce(e, {
								type: "image/png",
								backgroundColor: t,
								fetch: {
									requestInit: {
										mode: "no-cors",
									},
								},
							})
						);
					} catch (i) {
						console.error(
							"[replit-cartographer] Failed to take screenshot:",
							i,
						);
						return;
					}
				}
				function Wt(e) {
					return (
						e === "transparent" ||
						e === "rgba(0, 0, 0, 0)" ||
						e.endsWith(", 0)") ||
						e.endsWith(",0)")
					);
				}
				function _(e) {
					let i = e.getAttribute(M.METADATA);
					if (!i) return [];
					let t = `[${M.METADATA}="${i}"]`;
					return Array.from(
						document.querySelectorAll(t),
					)
						.filter(
							(o) => o instanceof HTMLElement,
						)
						.filter((o) => o !== e);
				}
				var R = class {
					selectedElement = null;
					selectedSiblingElements = [];
					isActive = !1;
					lastHighlightedElement = null;
					enableEditing = !1;
					shadowHost = null;
					shadowRoot = null;
					hoverHighlighter = null;
					hoverLabel = null;
					selectedHighlighter = null;
					selectedLabel = null;
					hoverSiblingHighlighters = [];
					selectedSiblingHighlighters = [];
					mutationObserver = null;
					constructor() {
						(this.setupMessageListener(),
							this.observeLightDarkModeSwitch(),
							this.notifyScriptLoaded());
					}
					initializeHighlighter() {
						((this.shadowHost =
							document.createElement("div")),
							(this.shadowHost.style.all =
								"initial"),
							(this.shadowRoot =
								this.shadowHost.attachShadow({
									mode: "open",
								})),
							document.body.appendChild(
								this.shadowHost,
							));
						let i =
							document.createElement("style");
						((i.textContent = Z),
							this.shadowRoot.appendChild(i));
						let t =
							document.createElement("style");
						((t.textContent = Q),
							document.head.appendChild(t),
							(this.hoverHighlighter =
								document.createElement("div")),
							(this.hoverLabel =
								document.createElement("div")),
							(this.hoverHighlighter.className =
								"beacon-highlighter beacon-hover-highlighter"),
							(this.hoverLabel.className =
								"beacon-label beacon-hover-label"),
							(this.selectedHighlighter =
								document.createElement("div")),
							(this.selectedLabel =
								document.createElement("div")),
							(this.selectedHighlighter.className =
								"beacon-highlighter beacon-selected-highlighter"),
							(this.selectedLabel.className =
								"beacon-label beacon-selected-label"),
							this.shadowRoot.appendChild(
								this.selectedHighlighter,
							),
							this.shadowRoot.appendChild(
								this.selectedLabel,
							),
							this.shadowRoot.appendChild(
								this.hoverHighlighter,
							),
							this.shadowRoot.appendChild(
								this.hoverLabel,
							));
					}
					setupMessageListener() {
						window.addEventListener(
							"message",
							this.handleMessage.bind(this),
						);
					}
					notifyScriptLoaded() {
						this.postMessageToParent({
							type: "SELECTOR_SCRIPT_LOADED",
							timestamp: Date.now(),
							version: O,
						});
					}
					postMessageToParent(i) {
						window.parent &&
							window.parent.postMessage(i, "*");
					}
					handleMouseMove = (i) => {
						if (
							this.isActive &&
							this.hoverHighlighter
						) {
							let t = X(i);
							if (
								!t ||
								t === this.hoverHighlighter ||
								t === this.selectedHighlighter ||
								t === this.shadowHost ||
								this.selectedSiblingHighlighters.includes(
									t,
								) ||
								this.hoverSiblingHighlighters.includes(
									t,
								)
							) {
								(this.hideHighlight(
									this.hoverHighlighter,
									this.hoverLabel,
								),
									(this.lastHighlightedElement =
										null),
									this.clearHoverSiblingHighlighters());
								return;
							}
							if (t === this.selectedElement) {
								(this.hideHighlight(
									this.hoverHighlighter,
									this.hoverLabel,
								),
									(this.lastHighlightedElement =
										null),
									this.clearHoverSiblingHighlighters());
								return;
							}
							(this.lastHighlightedElement &&
								this.lastHighlightedElement !==
									t &&
								this.lastHighlightedElement !==
									this.selectedElement &&
								this.lastHighlightedElement.removeAttribute(
									"contenteditable",
								),
								(this.lastHighlightedElement = t),
								this.updateHighlighterPosition(
									t,
									this.hoverHighlighter,
									this.hoverLabel,
								));
						}
					};
					handleMouseLeave = () => {
						this.isActive &&
							(this.hoverHighlighter &&
								(this.hoverHighlighter.style.opacity =
									"0"),
							this.hoverLabel &&
								(this.hoverLabel.style.opacity =
									"0"),
							this.hoverSiblingHighlighters
								.length > 0 &&
								this.clearHoverSiblingHighlighters(),
							this.lastHighlightedElement &&
								this.lastHighlightedElement !==
									this.selectedElement &&
								this.lastHighlightedElement.removeAttribute(
									"contenteditable",
								));
					};
					calculateLabelPosition(i, t) {
						return t < 28
							? {
									top: `${t + window.scrollY}px`,
									left: `${i.left + window.scrollX}px`,
									transform: "none",
									marginTop: "2px",
								}
							: {
									top: `${t + window.scrollY}px`,
									left: `${i.left + window.scrollX}px`,
									transform: "translateY(-100%)",
									marginTop: "-4px",
								};
					}
					updateHighlighterPosition(i, t, n) {
						if (!t || !n) return;
						let o = _(i);
						this.enableEditing &&
							o.length <= 1 &&
							i === this.selectedElement &&
							i.childElementCount === 0 &&
							i.tagName.toLowerCase() !== "img" &&
							i.setAttribute(
								"contenteditable",
								"plaintext-only",
							);
						let r = i.getBoundingClientRect(),
							a = window.innerHeight,
							s = Math.max(0, r.top),
							c = Math.min(a, r.bottom),
							h = Math.max(0, c - s);
						(Object.assign(t.style, {
							opacity: h > 0 ? "1" : "0",
							top: `${s}px`,
							left: `${r.left}px`,
							width: `${r.width}px`,
							height: `${h}px`,
						}),
							(n.textContent = B(i)));
						let l = this.calculateLabelPosition(
							r,
							s,
						);
						(Object.assign(n.style, {
							...l,
							opacity: h > 0 ? "1" : "0",
						}),
							t === this.selectedHighlighter
								? this.highlightSelectedSiblings(
										i,
									)
								: this.highlightHoverSiblings(i));
					}
					hideHighlight(i, t) {
						(i && (i.style.opacity = "0"),
							t && (t.style.opacity = "0"));
						let n = i === this.hoverHighlighter,
							o = i === this.selectedHighlighter;
						(n &&
							this.clearHoverSiblingHighlighters(),
							o &&
								this.clearSelectedSiblingHighlighters());
					}
					handleClick = async (i) => {
						if (!this.isActive) return;
						(i.preventDefault(),
							i.stopPropagation());
						let t = X(i);
						if (
							((!t ||
								t === this.hoverHighlighter ||
								t === this.selectedHighlighter ||
								t === this.shadowHost) &&
								(t = this.lastHighlightedElement),
							!t || t === this.selectedElement)
						)
							return;
						(this.unselectCurrentElement(),
							this.clearSelectedSiblingHighlighters(),
							(this.selectedElement = t));
						let n = _(t),
							o = n.length > 0;
						(o &&
							this.highlightSelectedSiblings(t),
							t.hasAttribute(
								"data-original-text",
							) ||
								t.setAttribute(
									"data-original-text",
									encodeURIComponent(
										t.textContent ?? "",
									),
								),
							!t.hasAttribute(
								"data-original-style",
							) &&
								t.hasAttribute("style") &&
								t.setAttribute(
									"data-original-style",
									encodeURIComponent(
										t.getAttribute("style") ?? "",
									),
								),
							!t.hasAttribute(
								"data-original-src",
							) &&
								t.hasAttribute("src") &&
								t.setAttribute(
									"data-original-src",
									encodeURIComponent(
										t.getAttribute("src") ?? "",
									),
								),
							!o &&
								this.enableEditing &&
								t.childElementCount === 0 &&
								t.tagName.toLowerCase() !==
									"img" &&
								(this.selectedElement.setAttribute(
									"contenteditable",
									"plaintext-only",
								),
								this.selectedElement.focus()),
							this.selectedHighlighter &&
								this.selectedLabel &&
								((this.selectedHighlighter.style.outlineStyle =
									"solid"),
								(this.selectedHighlighter.style.opacity =
									"1"),
								(this.selectedHighlighter.style.pointerEvents =
									"none"),
								(this.selectedLabel.style.opacity =
									"1"),
								(this.selectedLabel.textContent =
									B(t))),
							this.hoverHighlighter &&
								((this.hoverHighlighter.style.opacity =
									"0"),
								(this.hoverHighlighter.style.pointerEvents =
									"none")),
							this.hoverLabel &&
								(this.hoverLabel.style.opacity =
									"0"),
							this.clearHoverSiblingHighlighters(),
							this.updateHighlighterPosition(
								t,
								this.selectedHighlighter,
								this.selectedLabel,
							));
						let r = K(t),
							a;
						try {
							a = await Le(t);
						} catch (s) {
							console.error(
								"[replit-cartographer] Error capturing element screenshot:",
								s,
							);
						}
						(this.observeSelectedElement(),
							this.postMessageToParent({
								type: "ELEMENT_SELECTED",
								payload: {
									...r,
									screenshotBlob: a ?? void 0,
									siblingCount: o ? n.length : 0,
								},
								timestamp: Date.now(),
							}));
					};
					restoreElements() {
						document
							.querySelectorAll(
								'[data-replit-dirty="true"]',
							)
							.forEach((t) => {
								if (
									t.hasAttribute(
										"data-original-text",
									) &&
									t.textContent !==
										decodeURIComponent(
											t.getAttribute(
												"data-original-text",
											) || "",
										)
								) {
									let n = decodeURIComponent(
										t.getAttribute(
											"data-original-text",
										) || "",
									);
									((t.textContent = n),
										t.removeAttribute(
											"data-original-text",
										));
								}
								if (
									t.hasAttribute(
										"data-original-style",
									)
								) {
									let n = decodeURIComponent(
										t.getAttribute(
											"data-original-style",
										) || "",
									);
									(t.setAttribute("style", n),
										t.removeAttribute(
											"data-original-style",
										));
								} else t.removeAttribute("style");
								if (
									t.hasAttribute(
										"data-original-src",
									) &&
									t.getAttribute("src") !==
										decodeURIComponent(
											t.getAttribute(
												"data-original-src",
											) || "",
										)
								) {
									let n = decodeURIComponent(
										t.getAttribute(
											"data-original-src",
										) || "",
									);
									(t.setAttribute("src", n),
										t.removeAttribute(
											"data-original-src",
										));
								}
								t.removeAttribute(
									"data-replit-dirty",
								);
							});
					}
					unselectCurrentElement() {
						if (
							(this.restoreElements(),
							this.selectedElement)
						) {
							if (
								(this.selectedElement.removeAttribute(
									"contenteditable",
								),
								this.selectedElement.hasAttribute(
									"data-original-style",
								))
							) {
								let i = decodeURIComponent(
									this.selectedElement.getAttribute(
										"data-original-style",
									) || "",
								);
								(this.selectedElement.setAttribute(
									"style",
									i,
								),
									this.selectedElement.removeAttribute(
										"data-original-style",
									));
							}
							if (
								this.selectedElement.hasAttribute(
									"data-original-src",
								) &&
								this.selectedElement.getAttribute(
									"src",
								) !==
									decodeURIComponent(
										this.selectedElement.getAttribute(
											"data-original-src",
										) || "",
									)
							) {
								let i = decodeURIComponent(
									this.selectedElement.getAttribute(
										"data-original-src",
									) || "",
								);
								(this.selectedElement.setAttribute(
									"src",
									i,
								),
									this.selectedElement.removeAttribute(
										"data-original-src",
									));
							}
							this.selectedElement = null;
						}
						(this.clearSelectedSiblingHighlighters(),
							this.mutationObserver &&
								(this.mutationObserver.disconnect(),
								(this.mutationObserver = null)));
					}
					handleMessage = (i) => {
						if (!He(i.origin)) return;
						let t = i.data;
						if (!(!t || typeof t != "object"))
							switch (t.type) {
								case "TOGGLE_REPLIT_VISUAL_EDITOR": {
									this.handleVisualEditorToggle(
										t,
									);
									break;
								}
								case "CLEAR_SELECTION": {
									(this.unselectCurrentElement(),
										this.hideHighlight(
											this.selectedHighlighter,
											this.selectedLabel,
										));
									break;
								}
								case "UPDATE_SELECTED_ELEMENT": {
									if (!this.selectedElement)
										return;
									let { attributes: n } = t;
									([
										this.selectedElement,
										...this
											.selectedSiblingElements,
									].forEach((r) => {
										(n.style !== void 0 &&
											(r.setAttribute(
												"style",
												n.style,
											),
											r.setAttribute(
												"data-replit-dirty",
												"true",
											)),
											n.textContent !== void 0 &&
												((r.textContent =
													n.textContent),
												r.setAttribute(
													"data-replit-dirty",
													"true",
												)),
											n.className !== void 0 &&
												((r.className =
													n.className),
												r.setAttribute(
													"data-replit-dirty",
													"true",
												)),
											n.src !== void 0 &&
												(r.setAttribute(
													"src",
													n.src,
												),
												r.setAttribute(
													"data-replit-dirty",
													"true",
												)));
									}),
										this.updateHighlighterPosition(
											this.selectedElement,
											this.selectedHighlighter,
											this.selectedLabel,
										),
										this.selectedSiblingElements
											.length > 0 &&
											(this.clearHighlighters(
												this
													.selectedSiblingHighlighters,
											),
											(this.selectedSiblingHighlighters =
												[]),
											(this.selectedSiblingHighlighters =
												this.highlightElements(
													this
														.selectedSiblingElements,
												))));
									break;
								}
								case "CLEAR_ELEMENT_DIRTY": {
									this.selectedElement &&
										this.selectedElement.removeAttribute(
											"data-replit-dirty",
										);
									break;
								}
								case "APPLY_THEME_PREVIEW": {
									this.handleApplyThemePreview(t);
									break;
								}
								case "CLEAR_THEME_PREVIEW": {
									this.handleClearThemePreview();
									break;
								}
							}
					};
					handleApplyThemePreview(i) {
						if (i.type !== "APPLY_THEME_PREVIEW")
							return;
						let t = document.getElementById(
							v.THEME_PREVIEW_STYLE_ID,
						);
						(t ||
							((t =
								document.createElement("style")),
							(t.id = v.THEME_PREVIEW_STYLE_ID),
							document.head.appendChild(t)),
							(t.textContent = i.themeContent));
					}
					handleClearThemePreview() {
						let i = document.getElementById(
							v.THEME_PREVIEW_STYLE_ID,
						);
						i && i.remove();
					}
					handleVisualEditorToggle(i) {
						if (
							i.type !==
							"TOGGLE_REPLIT_VISUAL_EDITOR"
						)
							return;
						let t = !!i.enabled;
						((this.enableEditing =
							!!i.enableEditing),
							t
								? this.postMessageToParent({
										type: "REPLIT_VISUAL_EDITOR_ENABLED",
										timestamp: Date.now(),
									})
								: this.postMessageToParent({
										type: "REPLIT_VISUAL_EDITOR_DISABLED",
										timestamp: Date.now(),
									}),
							this.isActive !== t &&
								((this.isActive = t),
								this.toggleEventListeners(t)));
					}
					observeSelectedElement() {
						this.selectedElement &&
							(this.mutationObserver &&
								this.mutationObserver.disconnect(),
							(this.mutationObserver =
								new MutationObserver((i) => {
									if (
										i.some(
											(n) =>
												n.type ===
												"characterData",
										) &&
										this.selectedElement
									) {
										this.selectedElement.setAttribute(
											"data-replit-dirty",
											"true",
										);
										let n = K(
											this.selectedElement,
										);
										(this.postMessageToParent({
											type: "ELEMENT_TEXT_CHANGED",
											payload: n,
											timestamp: Date.now(),
										}),
											this.updateHighlighterPosition(
												this.selectedElement,
												this.selectedHighlighter,
												this.selectedLabel,
											));
									}
								})),
							this.mutationObserver.observe(
								this.selectedElement,
								{
									characterData: !0,
									childList: !1,
									attributes: !1,
									subtree: !0,
								},
							));
					}
					observeLightDarkModeSwitch() {
						let i = new MutationObserver((n) => {
								n.forEach((o) => {
									o.type === "attributes" &&
										o.attributeName === "class" &&
										(o.target.classList.contains(
											"dark",
										)
											? this.postMessageToParent({
													type: "DARK_MODE_USED",
													timestamp: Date.now(),
												})
											: this.postMessageToParent({
													type: "LIGHT_MODE_USED",
													timestamp: Date.now(),
												}));
								});
							}),
							t = document.documentElement;
						i.observe(t, {
							attributes: !0,
							attributeFilter: ["class"],
							childList: !1,
							subtree: !1,
						});
					}
					recalculateSelectedElement = () => {
						this.isActive &&
							(this.selectedElement &&
								this.updateHighlighterPosition(
									this.selectedElement,
									this.selectedHighlighter,
									this.selectedLabel,
								),
							this.lastHighlightedElement &&
								this.updateHighlighterPosition(
									this.lastHighlightedElement,
									this.hoverHighlighter,
									this.hoverLabel,
								),
							this.selectedSiblingElements
								.length > 0 &&
								(this.clearHighlighters(
									this
										.selectedSiblingHighlighters,
								),
								(this.selectedSiblingHighlighters =
									[]),
								(this.selectedSiblingHighlighters =
									this.highlightElements(
										this.selectedSiblingElements,
									))));
					};
					handleKeyDown = (i) => {
						this.isActive &&
							(i.key === "Escape" ||
								i.key === "Esc") &&
							this.handleVisualEditorToggle({
								type: "TOGGLE_REPLIT_VISUAL_EDITOR",
								enabled: !1,
								timestamp: Date.now(),
							});
					};
					toggleEventListeners(i) {
						i
							? (this.initializeHighlighter(),
								this.enableDisabledElements(),
								document.addEventListener(
									"mousemove",
									this.handleMouseMove,
								),
								document.addEventListener(
									"mouseleave",
									this.handleMouseLeave,
								),
								document.addEventListener(
									"click",
									this.handleClick,
									!0,
								),
								document.addEventListener(
									"keydown",
									this.handleKeyDown,
								),
								window.addEventListener(
									"resize",
									this.recalculateSelectedElement,
								),
								window.addEventListener(
									"scroll",
									this.recalculateSelectedElement,
									!0,
								))
							: (this.restoreDisabledElements(),
								document.removeEventListener(
									"mousemove",
									this.handleMouseMove,
								),
								document.removeEventListener(
									"click",
									this.handleClick,
									!0,
								),
								document.removeEventListener(
									"mouseleave",
									this.handleMouseLeave,
								),
								document.removeEventListener(
									"keydown",
									this.handleKeyDown,
								),
								window.removeEventListener(
									"resize",
									this.recalculateSelectedElement,
								),
								window.removeEventListener(
									"scroll",
									this.recalculateSelectedElement,
									!0,
								),
								this.mutationObserver &&
									(this.mutationObserver.disconnect(),
									(this.mutationObserver = null)),
								this.selectedElement &&
									(this.selectedElement.removeAttribute(
										"contenteditable",
									),
									this.selectedElement.removeAttribute(
										"data-original-text",
									),
									document
										.querySelectorAll(
											'[contenteditable="plaintext-only"]',
										)
										.forEach((t) => {
											t.removeAttribute(
												"contenteditable",
											);
										})),
								this.clearSelectedSiblingHighlighters(),
								this.clearHoverSiblingHighlighters(),
								this.hoverHighlighter?.remove(),
								this.hoverLabel?.remove(),
								this.selectedHighlighter?.remove(),
								this.selectedLabel?.remove(),
								this.shadowHost?.remove(),
								(this.hoverHighlighter = null),
								(this.hoverLabel = null),
								(this.selectedHighlighter = null),
								(this.selectedLabel = null),
								(this.shadowHost = null),
								(this.shadowRoot = null),
								(this.selectedElement = null));
					}
					clearHighlighters(i) {
						return (
							i.forEach((t) => {
								t.remove();
							}),
							[]
						);
					}
					clearHoverSiblingHighlighters() {
						this.hoverSiblingHighlighters =
							this.clearHighlighters(
								this.hoverSiblingHighlighters,
							);
					}
					clearSelectedSiblingHighlighters() {
						(this.selectedSiblingElements.forEach(
							(i) => {
								i.removeAttribute(
									"contenteditable",
								);
							},
						),
							(this.selectedSiblingElements = []),
							(this.selectedSiblingHighlighters =
								this.clearHighlighters(
									this
										.selectedSiblingHighlighters,
								)));
					}
					highlightElements(i) {
						if (
							!this.shadowRoot ||
							i.length === 0
						)
							return [];
						let t = [];
						return (
							i.forEach((n) => {
								let o =
									document.createElement("div");
								((o.className =
									"beacon-highlighter beacon-sibling-highlighter"),
									this.shadowRoot?.appendChild(o),
									t.push(o));
								let r = n.getBoundingClientRect(),
									a = window.innerHeight,
									s = Math.max(0, r.top),
									c = Math.min(a, r.bottom),
									h = Math.max(0, c - s);
								Object.assign(o.style, {
									opacity: h > 0 ? "1" : "0",
									top: `${s}px`,
									left: `${r.left}px`,
									width: `${r.width}px`,
									height: `${h}px`,
								});
							}),
							t
						);
					}
					highlightHoverSiblings(i) {
						this.clearHoverSiblingHighlighters();
						let t = _(i);
						this.hoverSiblingHighlighters =
							this.highlightElements(t);
					}
					highlightSelectedSiblings(i) {
						(this.clearSelectedSiblingHighlighters(),
							(this.selectedSiblingElements =
								_(i)),
							(this.selectedSiblingHighlighters =
								this.highlightElements(
									this.selectedSiblingElements,
								)));
					}
					enableDisabledElements() {
						document
							.querySelectorAll(
								"button[disabled], input[disabled]",
							)
							.forEach((i) => {
								(i.removeAttribute("disabled"),
									i.setAttribute(
										"data-replit-disabled",
										"",
									));
							});
					}
					restoreDisabledElements() {
						document
							.querySelectorAll(
								"[data-replit-disabled]",
							)
							.forEach((i) => {
								(i.removeAttribute(
									"data-replit-disabled",
								),
									i.setAttribute("disabled", ""));
							});
					}
				};
				if (typeof window < "u")
					try {
						window.REPLIT_BEACON_VERSION ||
							((window.REPLIT_BEACON_VERSION = O),
							new R());
					} catch (e) {
						console.error(
							"[replit-beacon] Failed to initialize:",
							e,
						);
					}
			})();
			document.getElementById("homeBtn").addEventListener("click", () => {
				window.location.href = "/web_split.html";
			});
			
			document.getElementById("protectBtn").addEventListener("click", () => {
				window.location.href = "ChongLuaDao.html";
			});
		</script>
		<script>
			// Khi b·∫•m n√∫t "Ph√¢n T√≠ch Ngay"
			document.querySelector('[data-testid="button-analyze-now"]')?.addEventListener('click', scrollToAnalyzer);

			// Khi b·∫•m link "Ph√¢n T√≠ch Tin Nh·∫Øn" ·ªü footer
			document.querySelector('[data-testid="link-footer-analyze"]')?.addEventListener('click', (e) => {
				e.preventDefault(); // ch·∫∑n nh·∫£y th√¥ theo href
				scrollToAnalyzer();
			});

			// H√†m cu·ªôn m∆∞·ª£t xu·ªëng section AI Analyzer
			function scrollToAnalyzer() {
				const targetSection = document.getElementById('ai-analyzer');
				if (targetSection) {
				targetSection.scrollIntoView({ behavior: 'smooth' });
				}
			}
			document.getElementById("analyzeBtn").addEventListener("click", async () => {
				const resultEl = document.getElementById("result");
				const loadingEl = document.getElementById("loading");

				// ·∫®n k·∫øt qu·∫£ c≈© v√† hi·ªán ·∫£nh GIF
				resultEl.style.display = "none";
				loadingEl.style.display = "block";

				// Gi·∫£ l·∫≠p x·ª≠ l√Ω ph√¢n t√≠ch (thay b·∫±ng API th·∫≠t c·ªßa b·∫°n)
				try {
					const fakeResponse = await new Promise((resolve) =>
					setTimeout(() => resolve("‚úÖ K·∫øt qu·∫£ ph√¢n t√≠ch ho√†n t·∫•t!"), 2500)
					);

					// Hi·ªán k·∫øt qu·∫£ v√† ·∫©n GIF
					resultEl.textContent = fakeResponse;
					loadingEl.style.display = "none";
					resultEl.style.display = "block";
				} catch (error) {
					resultEl.textContent = "‚ùå ƒê√£ x·∫£y ra l·ªói!";
					loadingEl.style.display = "none";
					resultEl.style.display = "block";
				}
				});

		</script>
		
	</body>
</html>
